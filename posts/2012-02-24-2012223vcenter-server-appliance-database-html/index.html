<!doctype html><html lang="en"
   data-mode="dark">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>vCenter Server Appliance Database | blog... things...</title><link rel="apple-touch-icon" href="/images/favicons/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="/images/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="/images/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="/images/favicons/manifest.json">
<link rel="icon" href="/images/favicons/favicon.ico">
<meta name="keywords" content="" />
<meta name="description" content="" /><meta itemprop="name" content="vCenter Server Appliance Database">
<meta itemprop="description" content="The vCenter Server Appliance comes with a built-in DB2 database for use as an all-in-one solution for small lab environments. The sizing is supposed to be less than 5 hosts and 50 VMs. But it can work much higher than that if given enough resources, :-).
One issue that occurs when using this appliance is that the DB2 log settings are too small for any extended operation. This is due to stat roll-up jobs taking more log space to complete than the DB2 instanace is set for."><meta itemprop="datePublished" content="2012-02-24T00:00:00+00:00" />
<meta itemprop="dateModified" content="2012-02-24T00:00:00+00:00" />
<meta itemprop="wordCount" content="431">
<meta itemprop="keywords" content="vcenter,vcenter-appliance,vsphere-5," /><meta property="og:title" content="vCenter Server Appliance Database" />
<meta property="og:description" content="The vCenter Server Appliance comes with a built-in DB2 database for use as an all-in-one solution for small lab environments. The sizing is supposed to be less than 5 hosts and 50 VMs. But it can work much higher than that if given enough resources, :-).
One issue that occurs when using this appliance is that the DB2 log settings are too small for any extended operation. This is due to stat roll-up jobs taking more log space to complete than the DB2 instanace is set for." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/2012-02-24-2012223vcenter-server-appliance-database-html/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2012-02-24T00:00:00+00:00" />
<meta property="article:modified_time" content="2012-02-24T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="vCenter Server Appliance Database"/>
<meta name="twitter:description" content="The vCenter Server Appliance comes with a built-in DB2 database for use as an all-in-one solution for small lab environments. The sizing is supposed to be less than 5 hosts and 50 VMs. But it can work much higher than that if given enough resources, :-).
One issue that occurs when using this appliance is that the DB2 log settings are too small for any extended operation. This is due to stat roll-up jobs taking more log space to complete than the DB2 instanace is set for."/>
<link rel="preload" href="/css/bundle.min.56f818f19e58c97481c8333650e24bf131abfada62c954646a72ae940adb3bf5.css" integrity="sha256-VvgY8Z5YyXSByDM2UOJL8TGr&#43;tpiyVRkanKulArbO/U=" crossorigin="anonymous" as="style" onload="this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="/css/bundle.min.56f818f19e58c97481c8333650e24bf131abfada62c954646a72ae940adb3bf5.css" integrity="sha256-VvgY8Z5YyXSByDM2UOJL8TGr&#43;tpiyVRkanKulArbO/U=" crossorigin="anonymous"></noscript></head>
  <body><script src="/js/bootstrap.min.b5d86dd3a5f60c90be38a252bb65fc1a2732f32e71dc12c051720f0c7aef3cde.js" integrity="sha256-tdht06X2DJC&#43;OKJSu2X8Gicy8y5x3BLAUXIPDHrvPN4=" crossorigin="anonymous"></script><header><nav class="navbar top-app-bar top-app-bar-expand-lg fixed-top">
  <div class="container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <i class="fas fa-bars"></i>
    </button><a class="navbar-brand me-3" href="/"><img class="logo" alt="Logo" src="/images/logo.png" loading="lazy"
   width="400" height="400"
   />
blog... things...
    </a>
    <button class="navbar-social-share" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSocialShare"
  aria-controls="offcanvasSocialShare" aria-label="Toggle social share">
  <i class="fas fa-share-alt"></i>
</button>

<div class="offcanvas offcanvas-bottom surface" tabindex="-1" id="offcanvasSocialShare" aria-labelledby="offcanvasSocialShare">
  <div class="offcanvas-header">
    <h3 class="offcanvas-title">Share</h3>
    <button type="button" class="btn btn-sm btn-outline-primary" data-bs-dismiss="offcanvas" aria-label="Close">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div class="offcanvas-body">
    <a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Twitter Share Button"
      target="_blank" href="https://twitter.com/intent/tweet?title=vCenter%20Server%20Appliance%20Database&url=%2fposts%2f2012-02-24-2012223vcenter-server-appliance-database-html%2f">
      <i class="fab fa-fw fa-twitter"></i> Twitter
    </a>
    <a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Facebook Share Button"
      target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=%2fposts%2f2012-02-24-2012223vcenter-server-appliance-database-html%2f">
      <i class="fab fa-fw fa-facebook-f"></i> Facebook
    </a>
  </div>
</div>

    <button class="navbar-settings" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSettings"
  aria-controls="offcanvasSettings" aria-label="Toggle settings">
  <i class="fas fa-ellipsis-v"></i>
</button>

<div class="offcanvas offcanvas-end surface h-100" tabindex="-1" id="offcanvasSettings" aria-labelledby="offcanvasSettings">
  <div class="offcanvas-header">
    <h3 class="offcanvas-title">Settings</h3>
    <button type="button" class="btn btn-sm btn-outline-primary" data-bs-dismiss="offcanvas" aria-label="Close">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div class="offcanvas-body">



<section class="setting">
  <form class="font-size-switcher-form row">
    <div class="col-auto">
      <label for="fontSize" class="form-label"><i class="fas fa-fw fa-font"></i> Font Size</label>
    </div>
    <div class="col-auto ms-auto">
      <input type="range" class="form-range" min="-2" max="2" id="fontSize">
    </div>
  </form>
</section>


<section class="setting palettes">
  <form class="row">
    <div class="col-auto">
      <label><i class="fas fa-fw fa-palette"></i> Palette</label>
    </div>
    <div class="col-auto ms-auto">
      <a id="btnPalette" class="btn btn-sm btn-outline-primary" role="button" aria-label="palettePicker">
        <i class="fas fa-eye-dropper"></i>
      </a>
    </div>
  </form>
  <div class="mt-2 d-flex visually-hidden" id="palettePicker"><button type="button" id="palette-blue" aria-label="Blue"
        class="btn btn-sm palette" data-palette="blue">
      </button><button type="button" id="palette-blue-gray" aria-label="Blue Gray"
        class="btn btn-sm palette" data-palette="blue-gray">
      </button><button type="button" id="palette-brown" aria-label="Brown"
        class="btn btn-sm palette" data-palette="brown">
      </button><button type="button" id="palette-cyan" aria-label="Cyan"
        class="btn btn-sm palette" data-palette="cyan">
      </button><button type="button" id="palette-green" aria-label="Green"
        class="btn btn-sm palette" data-palette="green">
      </button><button type="button" id="palette-indigo" aria-label="Indigo"
        class="btn btn-sm palette" data-palette="indigo">
      </button><button type="button" id="palette-orange" aria-label="Orange"
        class="btn btn-sm palette" data-palette="orange">
      </button><button type="button" id="palette-pink" aria-label="Pink"
        class="btn btn-sm palette" data-palette="pink">
      </button><button type="button" id="palette-purple" aria-label="Purple"
        class="btn btn-sm palette" data-palette="purple">
      </button><button type="button" id="palette-red" aria-label="Red"
        class="btn btn-sm palette" data-palette="red">
      </button><button type="button" id="palette-teal" aria-label="Teal"
        class="btn btn-sm palette" data-palette="teal">
      </button><button type="button" id="palette-yellow" aria-label="Yellow"
        class="btn btn-sm palette" data-palette="yellow">
      </button></div>
</section>
</div>
</div>

    <div class="collapse navbar-collapse" tabindex="-1" id="navbarSupportedContent" aria-labelledby="navbarSupportedContent">
      <form class="search-bar my-1" action="/search">
  <div class="input-group input-group-sm">
    <span class="btn btn-search disabled position-absolute left-0"><i class="fas fa-fw fa-search"></i></span>
    <input class="form-control rounded-pill" name="q" type="search" aria-label="Search">
  </div>
</form>

      <ul class="navbar-nav ms-auto"><li class="nav-item dropdown">
          <a class="nav-link" id="navbarDropdown-dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fas fa-fw fa-chevron-circle-down"></i>menu
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown-dropdown"><li>
              <a class="dropdown-item"
                href="https://github.com/virtualserverguy" target="_blank" rel="noopener noreferrer">
                <i class="fab fa-fw fa-github"></i>Github
              </a>
            </li></ul>
        </li></ul>
    </div>
  </div>
</nav>
</header>
<main role="main" class="container">
      <div class="row content">
<div class="col-lg-8">
  <div class="container"><nav class="row card component" aria-label="breadcrumb">
  <div class="card-body">
    <ol class="breadcrumb "><li class="breadcrumb-item"><a href="/">Home</a></li><li class="breadcrumb-item"><a href="/posts/">Posts</a></li><li class="breadcrumb-item active">vCenter Server Appliance Database</li></ol>
  </div>
</nav>    <article class="row card component mb-4 post"><div class="post-panel-wrapper">
  <div class="d-flex flex-column component rounded post-panel">
    
    <a id="sidebarToggler" class="action d-none d-lg-block" role="button">
  <i class="fas fa-fw fa-expand-alt" data-fa-transform="rotate-45"></i>
</a>
  
    

    
    <a class="action" data-bs-container="body" data-bs-toggle="popover" data-bs-html="true" data-bs-placement="bottom"
  data-bs-trigger="focus" tabindex="0" role="button" aria-label="Copyright" 
  data-bs-content="&lt;a target=&#34;_blank&#34; rel=&#34;license noopener noreferrer&#34; href=&#34;https://creativecommons.org/licenses/by-nc-nd/4.0/deed.en&#34;&gt;CC BY-NC-ND 4.0 &lt;i class=&#34;fab fa-fw fa-creative-commons&#34;&gt;&lt;/i&gt;&lt;i class=&#34;fab fa-fw fa-creative-commons-by&#34;&gt;&lt;/i&gt;&lt;i class=&#34;fab fa-fw fa-creative-commons-nc&#34;&gt;&lt;/i&gt;&lt;i class=&#34;fab fa-fw fa-creative-commons-nd&#34;&gt;&lt;/i&gt;&lt;/a&gt;
">
  <i class="fas fa-fw fa-copyright"></i>
</a>
    
    
  </div>
</div>
<div class="card-body">
        <h1 class="card-title my-3">vCenter Server Appliance Database
</h1><div class="post-meta"><span class="post-date" title="created on">
    <i class="fas fa-fw fa-calendar-alt"></i>Feb 24, 2012
  </span><span class="post-reading-time" title="reading time">
    <i class="fas fa-fw fa-coffee"></i>3 min read
  </span><a href="/categories/vmware-vsphere/" class="badge rounded-pill text-white bg-primary post-taxonomy">vmware-vsphere</a><a href="/tags/vcenter/" class="badge rounded-pill text-white bg-primary post-taxonomy">vcenter</a><a href="/tags/vcenter-appliance/" class="badge rounded-pill text-white bg-primary post-taxonomy">vcenter-appliance</a><a href="/tags/vsphere-5/" class="badge rounded-pill text-white bg-primary post-taxonomy">vsphere-5</a></div>
<div class="post-content mb-3"><p>The vCenter Server Appliance comes with a built-in DB2 database for use as an all-in-one solution for small lab environments. The sizing is supposed to be less than 5 hosts and 50 VMs. But it can work much higher than that if given enough resources, :-).</p>
<p>One issue that occurs when using this appliance is that the DB2 log settings are too small for any extended operation. This is due to stat roll-up jobs taking more log space to complete than the DB2 instanace is set for. Symptoms of this will be your vCenter service resetting itself every so often, you can verify this happening by watching the vpxd.log file for the line &ldquo;Transaction log full&rdquo; and the service dying shortly after that. The way I found it is that my vSphere Client would disconnect and ask for me to log back in everyonce in a while.</p>
<p>The easy(-ish) fix for this is to do the following:</p>
<ol start="2">
<li>SSH to the vCenter Appliance, if you left the default the username is &lsquo;root&rsquo; and the password is &lsquo;vmware&rsquo;. Once you are SSH&rsquo;ed to the box you will need to change to the DB2 user.</li>
</ol>
<blockquote>
<p>su -l db2inst1</p>
</blockquote>
<ol start="6">
<li>Check your current log setting by running:</li>
</ol>
<blockquote>
<p>db2 get db cfg for vCDB | grep log</p>
</blockquote>
<p>This will show you something like this:</p>
<blockquote>
<p>User exit for logging status = NO</p>
<p>Catalog cache size (4KB) (CATALOGCACHE_SZ) = 300</p>
<p>Number of primary log files (LOGPRIMARY) = 128</p>
<p>Number of secondary log files (LOGSECOND) = 16</p>
<p>Changed path to log files (NEWLOGPATH) =</p>
<p>Path to log files = /storage/db/db2/home/db2inst1/db2inst1/NODE0000/SQL00001/SQLOGDIR/</p>
<p>Overflow log path (OVERFLOWLOGPATH) =</p>
<p>Mirror log path (MIRRORLOGPATH) =</p>
<p>First active log file =</p>
<p>Block log on disk full (BLK_LOG_DSK_FUL) = NO</p>
<p>Block non logged operations (BLOCKNONLOGGED) = NO</p>
<p>Percent max primary log space by transaction (MAX_LOG) = 0</p>
<p>Num. of active log files for 1 active UOW(NUM_LOG_SPAN) = 0</p>
<p>Percent log file reclaimed before soft chckpt (SOFTMAX) = 520</p>
<p>User exit for logging enabled (USEREXIT) = OFF</p>
<p>HADR log write synchronization mode (HADR_SYNCMODE) = NEARSYNC</p>
<p>First log archive method (LOGARCHMETH1) = OFF</p>
<p>Options for logarchmeth1 (LOGARCHOPT1) =</p>
<p>Second log archive method (LOGARCHMETH2) = OFF</p>
<p>Options for logarchmeth2 (LOGARCHOPT2) =</p>
<p>Failover log archive path (FAILARCHPATH) =</p>
<p>Number of log archive retries on error (NUMARCHRETRY) = 5</p>
</blockquote>
<ol start="13">
<li>To change the log file sizing run the following:</li>
</ol>
<blockquote>
<p>db2 UPDATE DB CFG FOR VCDB USING logprimary 128 logsecond 16 logfilsiz 8192</p>
</blockquote>
<ol start="17">
<li>For the setting to take effect you will need to reboot the appliance. Once the vCenter Appliance is running again you can check/watch the log files being created.</li>
</ol>
<blockquote>
<p>ls -lah /storage/db/db2/home/db2inst1/db2inst1/NODE0000/SQL00001/SQLOGDIR/</p>
</blockquote>
</div><hr /><div class="post-navs d-flex mb-3 justify-content-evenly">
  <div class="post-nav post-prev"><i class="fas fa-fw fa-chevron-left"></i>
    <a href="/posts/2012-01-31-2012131netstat-for-esxi-html/">netstat for ESXi
</a>
  </div><div class="post-nav post-next">
    <a href="/posts/2012-04-12-2012411vcenter-configuration-manager-split-install-issues-html/">vCenter Configuration Manager Split Install Issues
</a>
    <i class="fas fa-fw fa-chevron-right"></i>
  </div></div><section class="related-posts-wrapper">
    <h3>Related Posts</h3>
    <ul class="related-posts"><li><a href="/posts/2011-08-29-2011829removing-the-vcloud-agent-from-esxi-hosts-html/">Removing the vCloud agent from ESXi hosts
</a></li><li><a href="/posts/2011-07-22-2011722error-in-vcenter-when-creating-a-pvdc-in-vcloud-director-1-html/">Error in vCenter when creating a PvDC in vCloud Director
</a></li><li><a href="/posts/2012-01-31-2012131netstat-for-esxi-html/">netstat for ESXi
</a></li><li><a href="/posts/2011-12-15-20111215nesting-resource-pools-good-idea-or-bad-html/">Nesting Resource Pools; Good Idea or Bad?
</a></li><li><a href="/posts/2011-09-15-2011915changing-the-auto-generated-passwords-in-vcloud-html/">Changing the auto generated passwords in vCloud
</a></li></ul>
  </section></div>
    </article><div class="card component row post-comments">
  <div class="card-body"></div>
</div></div>
</div><aside class="col-lg-4 sidebar d-flex">
  <div class="container">
    
    <section class="card row text-center profile component">
  <div class="card-body">
    <div class="col-12 d-flex align-items-center justify-content-center"><img class="profile-avatar rounded-circle" alt="Tom Ralph" src="" loading="lazy"
  
   />
</div>
    <div class="col-12 profile-meta"><div class="profile-name">Tom Ralph</div><div class="profile-bio">things</div></div>
  </div>
</section>
  <section class="recent-posts row card component">
  <div class="card-body">
    <h2 class="card-title">Recent Posts</h2>
    <ul><li><a href="/posts/secondpost/">Second post
</a></li><li><a href="/posts/firstpost/">Firstpost
</a></li><li><a href="/posts/2017-08-30-vsphere-6-5-top-kb-articles-for-upgrade-prep/">vSphere 6.5 - Top KB Articles for Upgrade Prep
</a></li><li><a href="/posts/2014-04-21-2014421mass-update-media-in-vcloud-dicrector/">Mass Update Media in vCloud Dicrector
</a></li><li><a href="/posts/2014-04-16-2014416relocating-a-vm-in-vcloud-director/">Relocating a VM in vCloud Director
</a></li></ul>
  </div>
</section><section class="taxonomies row card component">
      <div class="card-body">
        <h2 class="card-title">
          <a href="/categories">Categories</a>
        </h2>
        <div><a href="/categories/vmware-vsphere/" class="badge bg-primary text-white rounded post-taxonomy" title="vmware-vsphere">
            vmware-vsphere
          </a><a href="/categories/vmware-vcloud/" class="badge bg-primary text-white rounded post-taxonomy" title="vmware-vcloud">
            vmware-vcloud
          </a><a href="/categories/technology/" class="badge bg-primary text-white rounded post-taxonomy" title="technology">
            technology
          </a><a href="/categories/microsoft-hyper-v/" class="badge bg-primary text-white rounded post-taxonomy" title="microsoft-hyper-v">
            microsoft-hyper-v
          </a><a href="/categories/personal/" class="badge bg-primary text-white rounded post-taxonomy" title="personal">
            personal
          </a><a href="/categories/vcdx-process/" class="badge bg-primary text-white rounded post-taxonomy" title="vcdx-process">
            vcdx-process
          </a><a href="/categories/apple-ios/" class="badge bg-primary text-white rounded post-taxonomy" title="apple-ios">
            apple-ios
          </a><a href="/categories/vmware-vc-ops/" class="badge bg-primary text-white rounded post-taxonomy" title="vmware-vc-ops">
            vmware-vc-ops
          </a><a href="/categories/vmware-vcm/" class="badge bg-primary text-white rounded post-taxonomy" title="vmware-vcm">
            vmware-vcm
          </a><a href="/categories/vmworld/" class="badge bg-primary text-white rounded post-taxonomy" title="vmworld">
            vmworld
          </a></div>
      </div>
    </section><section class="taxonomies row card component">
      <div class="card-body">
        <h2 class="card-title">
          <a href="/tags">Tags</a>
        </h2>
        <div><a href="/tags/vcloud/" class="badge bg-primary text-white rounded post-taxonomy" title="vcloud">
            vcloud
          </a><a href="/tags/powershell/" class="badge bg-primary text-white rounded post-taxonomy" title="powershell">
            powershell
          </a><a href="/tags/vsphere/" class="badge bg-primary text-white rounded post-taxonomy" title="vsphere">
            vsphere
          </a><a href="/tags/vcenter/" class="badge bg-primary text-white rounded post-taxonomy" title="vcenter">
            vcenter
          </a><a href="/tags/security/" class="badge bg-primary text-white rounded post-taxonomy" title="security">
            security
          </a><a href="/tags/vcdx/" class="badge bg-primary text-white rounded post-taxonomy" title="vcdx">
            vcdx
          </a><a href="/tags/vmware/" class="badge bg-primary text-white rounded post-taxonomy" title="vmware">
            vmware
          </a><a href="/tags/vshield/" class="badge bg-primary text-white rounded post-taxonomy" title="vshield">
            vshield
          </a><a href="/tags/vsphere-5/" class="badge bg-primary text-white rounded post-taxonomy" title="vsphere-5">
            vsphere-5
          </a><a href="/tags/change/" class="badge bg-primary text-white rounded post-taxonomy" title="change">
            change
          </a></div>
      </div>
    </section>
    
  </div>
</aside>
</div>
    </main><footer class="footer mt-auto py-3 text-center container"><nav class="social-links nav my-2 justify-content-center"><a class="nav-link social-link" href="mailto:tom@thevsg.co" title="Email">
      <i class="fas fa-fw fa-2x fa-envelope"></i>
    </a></nav>
<div class="copyright mb-2">
  Copyright © 2020-2021 Tom Ralph. All Rights Reserved.
</div>
<div class="powered-by mb-2">
  Powered by <a href="https://gohugo.io" target="_blank" rel="noopener noreferrer">Hugo</a> and the <a href="https://github.com/razonyang/hugo-theme-bootstrap" target="_blank" rel="noopener noreferrer">Bootstrap</a> theme.
</div></footer>
<script src="/js/bundle.min.425550fc2a278561fe029578aa420a6953a8c62479f57ea3cbd6b0fc8557b403.js" integrity="sha256-QlVQ/ConhWH&#43;ApV4qkIKaVOoxiR59X6jy9aw/IVXtAM=" crossorigin="anonymous" defer></script><script defer src="/js/viewer.min.2f6511f1e2b87cdacb7bdeedeadc1dcf2fc9f22db69f89b70fd5d91224f892a4.js" integrity="sha256-L2UR8eK4fNrLe97t6twdzy/J8i22n4m3D9XZEiT4kqQ=" crossorigin="anonymous"></script>
</body>
</html>
