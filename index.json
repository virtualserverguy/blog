[{"categories":["technology","vmware-vsphere","vmworld"],"content":"Here are the top KB articles for upgrading to vSphere 6.5:\n KB 2146420 – Estimating vCenter Server 5.5 to vCenter Server Appliance 6.x migration time KB 2147711 – Estimating vCenter Server 5.5 or 6.0 to vCenter Server Appliance 6.5 migration time KB 2112283 – Regenerate vCenter Certificates KB 2147548 – Important information before upgrading to vSphere 6.5 KB 2147686 – vCenter Server 6.5 upgrade best practices KB 2147824 – Migrating VMFS 5 datastore to VMFS 6 datastore KB 2147289 – Update Sequence for vSphere 6.5 and its compatible VMware products KB 2147929 – vSphere Client (HTML5) and vSphere Web Client 6.5 FAQ KB 2113917 – Repointing VC 6.x to a PSC KB 2113115 – VMware PSC 6.x FAQs KB 2147454 – Linux VMware Tools update fails to complete KB 2147672 – Supported and deprecated topologies for VMware vSphere 6.5  ","date":"Aug 30, 2017","img":"","permalink":"/posts/2017-08-30-vsphere-6-5-top-kb-articles-for-upgrade-prep/","series":null,"tags":["vmwonvmw","vmworld2017","vsphere-upgrades"],"title":"vSphere 6.5 - Top KB Articles for Upgrade Prep"},{"categories":["vmware-vcloud"],"content":"In vCloud 5.1 it is very difficult to move media from LUN to LUN once it is uploaded. In vCloud 5.5 this gets better but it is still a pain.\nOne method I have found that works is to disable the LUN you want the media moved off of, and change something on the media record. Something such as adding a ' ' (space) to the description will cause vCloud Director to copy the media to a new LUN.\nBelow is a script to mass update media entries to allow them to move easier.\n1$MediaToUpdate = Get-Catalog -Org NAME | Get-Media 2Foreach ( $Media in $MediaToUpdate ) { 3 $RefMedia = Get-Media -Id $Media.Id 4 Write-Host “Updating “ $RefMedia.Name 5 $OldDescription = $RefMedia.Description 6 $OldDescription += \u0026#34;.\u0026#34; 7 $Media.ExtensionData.Description = $OldDescription 8 $Media.ExtensionData.UpdateServerData 9} Just make sure the LUN you want cleaned off is \u0026lsquo;disabled\u0026rsquo; and you have enough space on the other LUNs for the newly copied/moved media.\n","date":"Apr 21, 2014","img":"","permalink":"/posts/2014-04-21-2014421mass-update-media-in-vcloud-dicrector/","series":null,"tags":["powershell","vcloud"],"title":"Mass Update Media in vCloud Dicrector"},{"categories":["vmware-vcloud"],"content":"Occasionally I need to move a VM or vApp from datastore to datastore, various reasons why. Sometimes I need to break the linked clone tree and force vCenter to consolidate it. Sure I can power off the VM and execute a \u0026lsquo;consolidate\u0026rsquo; via the UI, but what if I need to keep the VM powered on? A storage vMotion does just that.\nSure you can fire up your vCenter Client or WebClient and move the VM that way. If you like your cloud / VM and like them running I would not do that.\nInstead run this tid-bit of code in a PowerShell window.\nTo move a vApp:\n1$destDatastoreName = “LUN NAME\u0026#34; 2$vm\\_names = Get-CIVApp \u0026#34;VAPP NAME\u0026#34; | get-civm 3foreach ($vm in $vm\\_names) { 4$dsQuery = Search-Cloud -QueryType Datastore -Name $destDatastoreName 5$dsRef = New-Object vmware.vimautomation.cloud.views.reference 6$dsRef.Href = \u0026#34;https://$($global:DefaultCIServers\\[0\\].name)/api/admin/extension/datastore/$($dsquery.id.split(\u0026#39;:\u0026#39;)\\[-1\\])\u0026#34; $vm.ExtensionData.Relocate($dsRef) 7} To move a single VM:\n1$destDatastoreName = “LUN NAME\u0026#34; 2$vm\\_name = get-civm \u0026#34;VM NAME\u0026#34; 3$dsQuery = Search-Cloud -QueryType Datastore -Name $destDatastoreName 4$dsRef = New-Object vmware.vimautomation.cloud.views.reference 5$dsRef.Href = \u0026#34;https://$($global:DefaultCIServers\\[0\\].name)/api/admin/extension/datastore/$($dsquery.id.split(\u0026#39;:\u0026#39;)\\[-1\\])\u0026#34; $vm.ExtensionData.Relocate($dsRef) An important rule to remember\u0026hellip; a VM can only live on 1 datastore, this means all VMDK\u0026rsquo;s and the VMX of that VM must exist on the same datasore. Executing the above will make sure that happens. If you fell like breaking things and use the vSphere Client, keep this in mind.\n","date":"Apr 16, 2014","img":"","permalink":"/posts/2014-04-16-2014416relocating-a-vm-in-vcloud-director/","series":null,"tags":["powershell","vcloud"],"title":"Relocating a VM in vCloud Director"},{"categories":["vmware-vcloud"],"content":"First\u0026hellip; Did you know that vApp Templates and Catalog Items are two different things in vCloud Director? If so, did you know that you can have a vApp Tempalte that does not link to a catalog item? Finally, you can\u0026rsquo;t have a Catalog Item without a vApp Tempalte backing though.\nWell I guess you could. If you manage to get one of those, you will want to follow my guide on fixing that here .\nOkay back to detecting if you have a vApp Template that is not mapped to a Catalog Item. To detect these \u0026lsquo;hung\u0026rsquo; vApp Templates run the following script as a \u0026lsquo;system administrator\u0026rsquo;\n1$VappTemplates = Search-Cloud -QueryType AdminVappTemplate 2 3foreach ( $VappT in $VappTemplates ) { $vAppTemplate = Get-CIVAppTemplate -ID $VappT.Id 4 $vapptid = $vapptemplate.id 5 $CatItem = Search-Cloud -QueryType AdminCatalogItem -Filter Entity==$VappTId 6 if ( !$CatItem ) { Write-Host \u0026#34;Get-CIVappTemplate -ID $($vAppTemplate.Id)\u0026#34; } 7} This will procduce an out put of \u0026lsquo;Get-CIVappTemplate\u0026rsquo; and the ID of the hung vApp Template. It is up to you to pick what to do with that hung vApp Template. I recommend removing them and re-creating whatever they were. To do that append this to the output and run it in the same PowerShell window:\n1Remove-CIVappTemplate -RemoveCatalogItem $False ","date":"Apr 14, 2014","img":"","permalink":"/posts/2014-04-14-2014414remove-vapp-template-with-no-catalog-item-link/","series":null,"tags":["powershell","vcloud"],"title":"Remove vApp Template With No Catalog Item Link"},{"categories":["vmware-vcloud"],"content":"After you run vCloud for a while, heck run any management product for a while, and you will have left overs, hung items, or even corrupt vApps.\nWith vCloud Director you can run the below to find those items and remove them.\n1$badvapp = Search-Cloud -QueryType AdminVapp | Where-Object { $\\_.Status -eq “UNRESOLVED\u0026#34; } 2foreach ( $id in $badvapp ) { 3Get-CIVApp -Id $id.id | Remove-CIVApp 4} This probably wont remove everything, those items that are left, generally can only be removed via editing the database though, I would not recommend that.\n","date":"Apr 9, 2014","img":"","permalink":"/posts/2014-04-09-201449detecting-and-removing-invalid-vapps/","series":null,"tags":["powershell","vcloud"],"title":"Detecting and Removing Invalid vApps"},{"categories":["vmware-vcloud"],"content":"In the event that a vApp Template or Catalog Item fails during the upload process parts of that vApp Template can be left behind. To find and remove those items run the following:\n1$badvappt = Search-Cloud -QueryType AdminVappTemplate | Where-Object { $_.Status -eq \u0026#34;FAILED_Creation\u0026#34; } 2foreach ( $id in $badvappt ) { 3 Get-CIVAppTemplate -Id $id.id | Remove-CIVAppTemplate -RemoveCatalogItem $false 4} Run the first part to see what there is, run it all to remove broken vApp Templates.\nYou will need to download the custom powershell pack from here .\n","date":"Apr 7, 2014","img":"","permalink":"/posts/2014-04-07-201447detecting-and-removing-vapp-templates/","series":null,"tags":["powershell","vcloud"],"title":"Detecting and Removing Invalid vApp Templates"},{"categories":["vmware-vcloud"],"content":"With vCloud Director if you need to change the Organization vDC Network, for instance you run out of IP addresses. You can use the script below to change the attached network of all powered off vApps.\n1$vapps = search-cloud -QueryType VAppOrgNetworkRelation | Where-Object { $_.OrgNetworkName -eq \u0026#34;Old Network Name\u0026#34; -and $_.Status -eq \u0026#34;Stopped” } 2foreach ($vapp in $vapps) { 3get-civapp -id $vapp.id | Get-CIVAppNetwork -ErrorAction SilentlyContinue | Where-Object { $\\_.ConnectionType -eq \u0026#34;Routed\u0026#34; } | Set-CIVAppNetwork -ParentOrgNetwork \u0026#34;New Network Name\u0026#34; 4Write-Host \u0026#34;Updated \u0026#34; $vapp.id \u0026#34; Owned by: \u0026#34; $Vapp.OwnerName 5} Simply change the New Network Name and Old Network Name in the commands above.\n","date":"Apr 2, 2014","img":"","permalink":"/posts/2014-04-02-201442modify-bulk-vapps-network-attachments/","series":null,"tags":["powershell","vcloud"],"title":"Modify Bulk vApp Network Attachments"},{"categories":["vmware-vcloud"],"content":"Often times an organization will have multiple Storage Profiles, different class fo storage, etc. The simple command of:\n1Get-OrgVDC Returns a summary or cummulative view of the storage profile usage. To get the actual usage for each profile, execute this command:\n1$OrgVdc = get-orgvdc (Org VDC Name) 2Search-Cloud -querytype AdminOrgVdcStorageProfile | where { $\\_.VdcName -eq $orgvdc } | get-ciview ","date":"Apr 1, 2014","img":"","permalink":"/posts/2014-04-01-2014422query-vcloud-director-for-storage-profile-usage/","series":null,"tags":["powershell","vcloud"],"title":"Query vCloud Director for Storage Profile Usage"},{"categories":["vmware-vcloud"],"content":"Sometimes when uploading content into vCloud there is a chance that the content can be broken. This can cause programs to have errors. To find these items, run the following in PowerShell as the a \u0026lsquo;system administrator\u0026rsquo;.\n1search-cloud -QueryType AdminCatalogItem | Where-Object { $\\_.Status -eq \u0026#34;Unknown\u0026#34; } You can now remove them utilizing the API or vCO and the \u0026lsquo;Remove Catalog Item\u0026rsquo; workflow.\n","date":"Mar 31, 2014","img":"","permalink":"/posts/2014-03-31-2014331find-broken-catalog-items-in-vcloud-5x/","series":null,"tags":["powershell","vcloud"],"title":"Find Broken Catalog Items in vCloud 5.x"},{"categories":["vmware-vcloud","vmware-vsphere"],"content":"Even when using vC Ops from VMware, vCenter metrics, vCloud Metrics, and Hyperic Montoring there are things that can be missed.\nWhat if the datastore shows 1ms latency on the vSphere host, the CPU usage is low, the Memory is not being swapped, but a user insists it is just \u0026lsquo;slow\u0026rsquo;. What would you check?\nIn our cloud deployment (25,000 VMs in a single vCloud instance, and we have 4); I have deployed 4 - 6 VMs per vCenter across differnet datastores, on different hosts. These VMs are 512MB of RAM, 16GB of Hard Drive, and 1 vCPU. On these VMs I installed CentOS, MySQL and sysbench.\nsysbench for those that do not know runs artificial tests against the HDD, RAM, CPU and MySQL. Since we have the CPU, RAM and HDD monitored by other products, I configured it to only point at the MySQL server. The MySQL test will test every portion of the compute stack. While the RAM and CPU may report within acceptable ranges, they maybe high in those ranges. Combinded that may cause a performance impact.\nMy script runs every 5 minutes via a cron job, and logs the data to a SQL database, for later reporting and analysis.\nI won\u0026rsquo;t cover how to install sysbench or MySQL here, since that can be found else where on the internet. sysbench \u0026amp; MySQL You will also need to install iSQL for CentOS, to write your data to a SQL server (if that is your target), those instructions can be found here .\nAfter you have the above installed and ready, you can run the following to get a report on the status of your VMs performance:\n1sysbench --num-threads=16 --max-requests=10000 --test=oltp --oltp-table-size=500000 --mysql-socket=/var/lib/mysql/mysql.sock --oltp-test-mode=complex --mysql-user=root --mysql-password=VMware1! run \u0026gt; mysql.sysbench 2$testvaule = cat mysql.sysbench | egrep \u0026#34; cat|transactions:\u0026#34; | awk {\u0026#39;print substr($3,2) \u0026#39;} 3$date = date -u \u0026#34;+%F %R\u0026#34; 4$machine = ifconfig eth0 | grep inet | awk \u0026#39;{ print substr($2,6) }’ 5$hostname = hostname 6inssql=\u0026#34;insert into TABLENAME VALUES (‘$date\u0026#39;, ‘$machine\u0026#39;, ‘$testvalue’,’$hostname\u0026#39;)\u0026#34; 7echo $inssql| isql HOSTNAME USERNAME PASSWORD The above will insert the data in to a SQL table, for later reporting.\nKeep in mind you do not want to make a \u0026lsquo;monster\u0026rsquo; VM, the smaller the better, you want to tax all of the components. If you give it 4GB of RAM, then MySQL will cache all of the disk I/O in RAM and not report an accurate number. If you give it 4 vCPU\u0026rsquo;s you may actually artificially lower your score by causing the hypervisor to schedule 4 vCPUs worth of tasks. In this case smaller is most definitely better.\nThis will not replace the other monitoring solutions you may have, but it will help to augment those solutions.\n","date":"Mar 31, 2014","img":"","permalink":"/posts/2014-03-31-2014331monitoring-compute-performance-of-a-vm/","series":null,"tags":["monitoring","performance","vcloud"],"title":"Monitoring Compute Performance of a VM"},{"categories":["vmware-vcloud"],"content":"With vCloud Director 5.1 every once in a while a CD will refuse to eject, or worse it will say it ejected the CD but it will not make the change in vCenter.\nTo get around this with PowerCLI connected to the vCenter use this command:\n1get-folder | get-VM | Get-CDDrive | Set-CDDrive -NoMedia -Confirm:$false This will allow the CD to be ejected without having to Deploy, Eject, Re-Capture the vApp Template. To use for a normal vApp use the vApp Name/UUID.\n","date":"Mar 28, 2014","img":"","permalink":"/posts/2014-03-28-2014327ejecting-cd-isos-in-vcloud-director/","series":null,"tags":["powershell","vcloud"],"title":"Ejecting CD ISO's in vCloud Director"},{"categories":null,"content":"Requirements for SSO in vCloud Director The SAML process and parties using them have formal roles and responsibilities:\n Service Provider – An entity that receives the SAML Message from an Idenity Provider (vCloud Director ) Identity Provider – An entity that authenticates an user (Horizon)  The Identity provider must provide these fields in the response (case sensitive):\n UserName EmailAddress FullName Groups  While the only required field is UserName it is recommended that all fields be returned with proper information to allow for ease of management and administration of the users and their rights.\nConfiguring vCloud Director In vCloud director you will first need to enable the use of a SAML Identity provider.\n Once logged in as a Organization Administrator or System Administrator go to the organization Administration page, click on Federation, then enable the ‘Use of SAML Identity Provider’ The XML metadata file that you got from your SAML/SSO provider should be downloaded to the machine these actions are running from. Due to the use of special characters and copy/paste issues it is not recommended to paste in a value into the field. Instead use the upload function to upload the XML file in whole.   In the case of VMware\u0026rsquo;s Horizon Product the metadata can be found here: https:///SAAS/API/1.0/GET/metadata/idp.xml\n  Now close the organization tab or log out and back into the UI to get the ‘Groups’ and Import from SAML options in the UI. After that is completed you can now import users into vCloud Director.  Since SAML users and groups are not searchable users will have to be added one per line for each role. Another option for granting access to the organization is through the use of groups.\nAt this point the configuration of vCloud Director is complete.\nExporting XML Metadata from vCloud Director We now need to export a file much like what we imported from the SAML provider, so that the SAML provider will trust and validate requests coming from vCloud Director. This file and related certificates are controlled on the Federation page where we imported the SAML XML file. At the bottom of the page click on the ‘Regenerate’ button to create a new certificate with a validity of 1 year.\nIt will prompt you with a warning about changing the certificate. If you have already setup a SAML provider relationship, changing this certificate will break that relationship until the SAML provider replaces their current information with the new certificate. Once the certificate is generated you can download it via this weblink: https://./cloud/org//saml/metadata/alias/vcd Save this file as an XML file, then provide this to your SAML provider for the next section.\nConfiguring Horizon for vCloud Director SSO First you will need to login to the administrator interface for Horizon and create a new Application, then follow these configuration items for that application.\n Configure the Login Redirection URL to be the organization URL in vCloud Director. This is required for vCloud Director to work properly, since the authentication sequence must start with vCloud Director and not Horizon. Check the ‘Include the Destination in the response’ Check the Sign the entire response. Check the ‘Sign the assertion’ Remove the ‘Include Cert’ checkbox Select the configure via Meta-data XML option. Then upload the certificate (copy/paste) the certificate in to the text box given. Click on ‘Populate Attribute Mapping’ Configure the Attribute Mapping to match your deployment of Hoizon.  ","date":"Mar 20, 2013","img":"","permalink":"/posts/2013-03-20-2013319vcloud-director-and-vmware-horizon-intergration/","series":null,"tags":null,"title":"vCloud Director and VMware Horizon Intergration"},{"categories":["vmware-vcloud"],"content":"As a system or organization administrator head to the \u0026lsquo;Administration\u0026rsquo; page, and then the federation tab. Paste or upload the SAML configuration XML. Ensure the certificate at the bottom of the page is recent, if not click re-generate certificate. It will produce a certificate for 1 year.\nAfter the certificate is re-newed enter this URL in to the web browser: cloud/org/\\[orgName\\]/saml/metadata/alias/vcd ; save the XML file on that page. This is the file you will need to provide the SAML or 3rd party authentication service with in order to authenticate you.\nNow you have SSO or SAML or 3rd authentication, enabled on your organization. Once configured/enabled the Org login page will now use the SAML provider, meaning any local users will be locked out.\n","date":"Feb 23, 2013","img":"","permalink":"/posts/2013-02-23-2013222enabling-saml-providers-in-vcloud-51/","series":null,"tags":["security","vcloud"],"title":"Enabling SAML Providers in vCloud 5.1"},{"categories":null,"content":"Heads up\u0026hellip; VMware released vCloud Network Security 5.1.2a this morning, it is a MUST upgrade if you are on 5.1.2. Fixes a pretty big show stopper bug where a vShield Manager can stop responding to requests without warning/error and the only fix is to bounce the entire vShield Manager.\nRelease notes here .\nDoumentation here .\nvCloud Network Security Product page here .\n","date":"Feb 8, 2013","img":"","permalink":"/posts/2013-02-08-201328vcloud-network-security-512a-release/","series":null,"tags":null,"title":"vCloud Network Security 5.1.2a Release"},{"categories":["vmware-vsphere"],"content":"Here is how to recover the embedded DB password on the VMware vCenter Virtual Appliance (VCVA):\nFrom the console (or SSH) of the VCVA run this command:\ngrep EMB_DB_PASSWORD /etc/vmware-vpx/embedded\\_db.cfg\nFrom: http://kb.vmware.com/selfservice/microsites/search.do?language=en _US\u0026amp;cmd=displayKC\u0026amp;externalId=2004506\n","date":"Jan 23, 2013","img":"","permalink":"/posts/2013-01-23-2013123recovering-the-embedded-db-password-on-vcva/","series":null,"tags":["vcenter"],"title":"Recovering the Embedded DB Password on VCVA"},{"categories":["personal","technology"],"content":"With the New Year brings some new changes; I am transferring inside of VMware to a new group that is focusing on Cloud Consumption.\nCloud Consumption\u0026hellip; WTH is that?\nFor the past, well as long as I have been in IT, I have been doing \u0026lsquo;Ping, Power and Pipe\u0026rsquo;. With IaaS it is in my opinion it has been done, most any experienced IT person could stand up IaaS.\nIn my new role I will be focusing on methods to consume the cloud offerings. For example, how does one define a service (in the ITIL sense) from this \u0026lsquo;Ping, Power, and Pipe\u0026rsquo;? Another example, what requirements does a consumer have? How can the cloud offering satisfy those requirements?\nMore importantly\u0026hellip; \u0026ldquo;Define the services that consumers will utilize, while driving the architecture of the physical\u0026rdquo;\nHappy New Years! 2013 will most definitely be a challenging year.\n","date":"Jan 1, 2013","img":"","permalink":"/posts/2013-01-01-20121231new-year-brings-changes/","series":null,"tags":["jobs"],"title":"New Year... Brings Changes"},{"categories":null,"content":"This morning on twitter I was asked if Symform \u0026ldquo;Secure Online Backup\u0026rdquo; was as secure as SpiderOak (my favorite online storage/backup solution). Here is my analysis from reading Symform\u0026rsquo;s publically facing documents.\nHow it works: According to Symform\u0026rsquo;s website, your data is processed at the folder level. Meaning that all files in a folder are encrypted together. This does give the benefit of being able to de-duplicate the files inside that folder, it is not clear if this is at the block or file level though. If done at the block level this would be analogous to compression, if done at the file level I would image not much savings in space since it is uncommon for duplicate files in the same folder.\nThese files are encrypted with AES256 (good job there), but what generates this key? Since there would be a separate key per folder/container it would be near impossible for the end user to manage these keys. That means the Symform Cloud Control is generating and managing these keys for you the end user. (This is confirmed by their own documentation)\nAfter your files are encrypted (in 64MB folder chunks), they are then broken into 1MB chunks. Parity fragments are then generated out of those 1MB chunks, 32 parity fragments to be exact. Those parity chunks are then sent out to the Symform Global Cloud Storage Network, and distributed to 96 devices.\nAnalysis: That seems fine right? Your data is spread among 96 random devices on the internet, encrypted and secure.\nWell that is the problem, who controls the decryption/encryption keys? Symform does. Who controls where your data is stored on this \u0026lsquo;Global Cloud Storage Network? Symform does.\nFrom a stand point of Trust No One, Symform fails the test. A hacker can still get your AES keys, and the location of those blobs on the internet. A government agency can still subpoena for your data, and have access to the decrypted data.\nWhile it looks like a neat technology, SpiderOak still wins in my opinion, since I control the encryption keys and where my data resides (Amazon S3 storage).\n","date":"Dec 19, 2012","img":"","permalink":"/posts/2012-12-19-20121219symform-security-analysis/","series":null,"tags":null,"title":"Symform Security Analysis"},{"categories":["vmware-vsphere"],"content":"Over the past few weeks I have had some people ask what I would recommend for host isolation addresses and responses, when using vSphere x.x with high availability (HA) enabled.\nFirst off as with most everything in computers \u0026lsquo;It depends\u0026rsquo;.\nItems to consider with host isolation response is what type of storage is being utilized? Is it considered an outage if the vSphere hosts can talk to each other but the virtual machines (VMs) cannot? How stable is my management network? Is datastore heart-beating setup correctly? The list can of things to consider can be quite long.\nHere is what I generally recommend…\nNAS Based Storage Options (iSCSI or NFS) First, set one of the host isolation response addresses to the virtual IP (VIP) or the IP of the storage array. This will tell you if you can at least talk to the array; chances are that is you cannot talk to the array your machines have already failed.\nThat brings me to the isolation response, since the VMs should already be dead, remember the NAS array and host are no longer able to communicate, I recommend \u0026lsquo;Power Off\u0026rsquo;. If you were to leave the response to \u0026lsquo;Leave Powered On\u0026rsquo; you can run into a chance of corruption on the guest disks. Think about it, the disk goes away for 60 seconds, then comes back. Do you think that VM is going to be able to recover, what are the odds of it corrupting that vital disk? What about \u0026lsquo;Shutdown Guest\u0026rsquo;, well that has a chance of the same exact thing happening.\nPower Off in this setting is the safest setting, not only will it allow for that VM to be brought up elsewhere, you run a less chance of corruption or VM failure.\nFiber based storage (SAN) With fiber the network isolation address does not matter as much, reason being the storage is not relying on the network for communication.\nGeneral Host Isolation Techniques If it is considered a down time for the VM network to fail but not the management network, is there a way we can mitigate this?\nOf course, put a vmkernel port on the virtual machine network, enable it for HA traffic, then place an isolation address of that networks gateway in to the HA configuration.\n","date":"Oct 14, 2012","img":"","permalink":"/posts/2012-10-14-20121014host-isolation-response-settings/","series":null,"tags":["vsphere"],"title":"Host Isolation Response Settings"},{"categories":["apple-ios"],"content":"You can disable (well limit) the ad tracking that is done in iOS 6. This setting turns off the ability for advertisers to use what is called the \u0026lsquo;Advertising Identifier\u0026rsquo;. This replaces the devices UUID which is a non-anonymous way of tracking usage. The advertising identifier is \u0026lsquo;anonymous\u0026rsquo; (though further research needs to be done).\nHere is how to disable the ability for advertisers to track you at all (once they move from the old deprecated UUID model).\n Fire up your iOS device Under Settings Find General Click on About Scroll to the bottom and select \u0026lsquo;Advertising\u0026rsquo; Set the \u0026lsquo;Limit Ad Tracking\u0026rsquo; to \u0026lsquo;On\u0026rsquo;  You are done. Now go forth, untracked from iOS ads (the Apple ones anyway).\n","date":"Sep 25, 2012","img":"","permalink":"/posts/2012-09-25-2012924ios-6-ad-tracking/","series":null,"tags":["privacy","security"],"title":"iOS 6 - Ad Tracking"},{"categories":null,"content":"Spoofguard records the IP address of each vNIC secured by vShield App. Spoofguard can be configured in two different modes, automatic and manual.\nIn Automatic mode the first IP that is presented for each vNIC is recorded and allowed to communicate without authorization. If the IP of the vNIC changes, the machine will no longer be able to communicate on the network until the new IP is approved.\nIn manual mode all IPs must be approved prior to being allowed to communicate; even existing virtual machines will be blocked until approved.\nWhen enabling Spoofguard in an environment where there are existing virtual machines, it is recommended to enable Spoofguard in ‘Automatic’ mode. Once the vNICs are learned and reviewed it is then acceptable to switch to Spoofguard to ‘Manual’ mode, which will restrict all new virtual machines from communicating until approved. When deploying vShield App to a greenfield environment Spoofguard can be enabled with ‘Manual’ mode. Once Spoofguard has flagged a VNIC for approval, it must be approved prior to traffic being allowed to transmit. This is true even if Spoofguard is later disabled; all VNICs that are in ‘Require Approval’ will require approval before they can transmit.\nWhen utilizing vShield App in a vCloud Director environment Spoofguard should not be enabled. The reason for this is that when vCloud Director brings a virtual machine online for the first time the machine will boot up and broadcast an IP (either DHCP or a pre-defined IP). When the machine is fully booted the guest customization script takes effect and changes the IP to the one defined in vCloud Director. Spoofguard will learn the first IP and not allow the VM to communicate on the network until the new IP is approved. It is possible to use vCenter Orchastrator to automate this approval process; that discussion and how to is out of the scope of this document.\nSpoofguard currently supports only one IP per VNIC, so one cannot specify a secondary or failover IP.\n","date":"Sep 25, 2012","img":"","permalink":"/posts/2012-09-25-2012925vcns-app-spoofguard-deployment/","series":null,"tags":["vcloud","vcloud-network-security","vshield"],"title":"vCNS App - Spoofguard Deployment"},{"categories":null,"content":"VMware this morning released a KB article and a fix for the Edge devices filling up on disk space. While it did not kill the edge or cause an outage, it did stop you from being able to make changes to the Edge\u0026rsquo;s configuration.\nThe official fix will be released on this site: https://my.vmware.com/web/vmware/info/slug/security_products/vmware_vcloud_networking_and_security/5_1 The upgrade/patch will require the standard vCloud Network Security (vShield) upgrade process where the Edge device will need to be replaced with the new code. (READ: Possible outage of network for a few moments while the Edge is swapped)\nHow do you know if you have this problem?\nIn vCloud Director, attempting a reconfig fails with this error:\n VIX_E_DISK_FULL\n In vCloud Director, when looking at Edge Gateways, you receive this error:\n Edge VM backing the edge gateway is unreachable\n Just remember, when this happens it is not causing an outage or a network failure. The edge is basically running \u0026lsquo;headless\u0026rsquo; at that time, and will not accept any ruleset changes.\n","date":"Sep 24, 2012","img":"","permalink":"/posts/2012-09-24-2012924vcns-edge-51-vixediskfull-error-fix/","series":null,"tags":null,"title":"vCNS Edge 5.1 VIX_E_DISK_FULL ERROR Fix"},{"categories":null,"content":"What the heck is Network as a Service (NaaS)?\nWait I know\u0026hellip; it is one of those catchy new jargons that the marketing people use.\nActually, they will; someday.\nRight now though I am referring to the idea that what was done for compute, virtualization, can be done for networking. Think quickly of how networking is tied to the physical.\nIf you want to add a new server to your datacenter\u0026hellip; You have to rack it, power it, and connect it to the physical network. Imagine that server is virtual\u0026hellip; Now you just have to wire the network to the host, then connect the virtual machine to that physical network.\nTake it a step further.\nYou create the server, then you connect it to the logical network.\nLogical network? Yes.\nA network that is defined by software, managed by software, and is agile like software.\nWant to move that virtual machine to a new datacenter? Take your network and virtual machine with you.\nThis is the next big thing for datacenters, networking and virtualization. Sure over a decade ago servers started to get virtualized. Now what is one of the last things to hold a machine to the physical world? Networking.\nWhile details, methods and the nitty-gritty is still being worked out\u0026hellip; just think of the possibilities.\nI am sure I will have more to say on this in the coming weeks and months.\n","date":"Sep 12, 2012","img":"","permalink":"/posts/2012-09-12-2012912network-as-a-service/","series":null,"tags":["networking","virtual-network"],"title":"Network as a Service"},{"categories":["personal"],"content":"I started working at VMware just under two years ago. In that time I have gone for a Cloud Practice, where we developed the services and solutions that are being implemented today. Which transitioned into a group developing bleeding edge documentation, processes, and ultimately \u0026lsquo;making the marketing world a reality\u0026rsquo;.\nSince then I have transitioned to a more security in the cloud role. For example, how can a workload in the cloud be secured and audited against, no matter where it is running?\nNow for a new challenge, something fresh; most importantly\u0026hellip; something NEW. Not only to me, but to almost everyone.\nI was asked a few weeks ago to join a new business unit in VMware to join a new Global Center of Excellence on Network Virtualization Security. There I will be focusing on the current VMware vCloud Network Security Suite of products. Most interesting is merging the vCloud Network Security Suite with Nicira\u0026rsquo;s NVP product.\nWhile it is still cloud related, it is now more network (NaaS), security, and then cloud.\nLet the mayhem being!\n","date":"Sep 12, 2012","img":"","permalink":"/posts/2012-09-12-2012912time-for-a-change-well-a-new-direction-at-least/","series":null,"tags":["change","job"],"title":"Time for a change... Well a new direction at least"},{"categories":["vcdx-process"],"content":"There have been lots of articles on the defense and the process… so I will not waste space on that. This is going to be focused on \u0026lsquo;What is a VCDX?\u0026rsquo;\nIt means that you are an expert at designing and architecting VMware virtual environments; more specifically vSphere environments. Of course to achieve this level of certification you had to pass a VCP test, a VMware Certified Advanced Professional Datacenter Design (VCAP-DCD) and Datacenter Administrator (VCAP-DCA) test.\nDoes it mean you are a master at the technical portions of vSphere (Networking configuration, storage configuration, computer configuration)?\nNo.\nThere are VCDX\u0026rsquo;s that are CCIE level network engineers, but that is not their only skill set. They know of SAN design, layout, configuration, as well of compute limitations.\n For example they know that a physical server with 4,096TB of RAM, with 64 socket\u0026rsquo;s is just not realistic or cost effective. They also know that a RAID 5 probably should not be used for a write heavy workload, but if they use a RAID 5 LUN, they identify this possible issue.  Sure it seems easy to install and design a vSphere environment, but consider that vSphere is a technology and suite of products that touches nearly every aspect of a corporations IT.\nvSphere requires networking, storage, servers, power, cooling, a workload. This means that you will need to understand enough of those areas, including other areas that you may touch, to properly design the solution.\n It means that you are able to gather requirements from a customer for their use cases. It means that you are able to consider the impacts of such requirements, product limitations, product features, and most importantly… The impact of decisions that you make. It means that you are able to identify the risks in your design, then mitigate or reduce that risk to an acceptable level. It means that you are able to consider dependancies to the elements of your design, the customers existing environment, and the customers existing operational procedures.  You also need to understand the operational aspects of a design.\n How do I implement it? How do I test it? How can I update it? How do I maintain it? What do I do when something breaks? What is likely to break?  It requires a different mind set.\nIt requires the mindset of an architect, a consultant, and a system administrator.\n","date":"Aug 31, 2012","img":"","permalink":"/posts/2012-08-31-201291what-does-it-take-to-achieve-a-vcdx-certification/","series":null,"tags":["vcdx"],"title":"What does it take to achieve a VCDX certification?"},{"categories":null,"content":"The latest versions of VMware\u0026rsquo;s vCenter, vSphere, vCloud Director, and vShield are now at version 5.1. The first major, ground breaking change\u0026hellip;\nvRAM is GONE!\nThat is right, a year after making the very unpopular choice to limit the amount of \u0026lsquo;vRAM\u0026rsquo; you could use per license, VMware has heard the screams of pain and completely tossed the idea. While it only really effected a handful of the thousands of customer of VMware, it was a complexity that caused more confusion than answers.\nNow to the news\u0026hellip;\nvSphere 5.1 has once again rev\u0026rsquo;ed the virtual hardware version to version 9. Version 9 will give you the ability to run 64 cores on a single VM, this makes the \u0026lsquo;Monster VM\u0026rsquo; even larger!\nvCenter 5.1 supports 20,000 VMs powered on in the same vCenter, 25 linked vCenters, 1,000 hosts per datacenter, 128 storage vMotions concurrently.\nVMware is also moving away from the thick C# client that was tied to Windows only machines, to a web-based client. This new vSphere Web Client was there in 5.0 but it was incomplete and lacked basic functions still. 5.1 is the first version of the vSphere Web Client that is actually a near replacement for the old thick client. If the vSphere Web Client is used you can actually get around 150 concurrent client connections to your vCenter server(s).\nMore to come as information comes out of VMWorld this week!\n","date":"Aug 27, 2012","img":"","permalink":"/posts/2012-08-27-2012827vcenter-and-vsphere-51/","series":null,"tags":null,"title":"vCenter and vSphere 5.1"},{"categories":null,"content":"Those of you that used the former product vShield that is OLD news, VMware\u0026rsquo;s marketing team has renamed it to be VMware vCloud Network Security, which is really what it is. vShield EndPoint is now free with vSphere host licenses, Enterprise Plus is needed of course.\nHere is a highlight of what is new in vCloud Network Security:\n The Edge product finally supports more than two interfaces, and becomes a more flexible and usable product. It now features 10 interfaces, it can be a mix of internal and external interfaces. Edge now has an SSL VPN built in to it, this is truly interesting with vCloud Deployments. Instead of needed an IPSec VPN client, and the underlying requirements (looking at you GRE), now the requirement is port 443. The new UI\u0026hellip; can\u0026rsquo;t say enough about it. It is clearly a ground up re-design from the old design. Now it is more standard, easier to follow, and much easier to add/change/delete rules. Throughput - Edge is now \u0026lsquo;officially\u0026rsquo; supporting \u0026gt; 3Gb/s with 2,000 NAT and 2,000 Firewall rules. \u0026lsquo;Unofficially\u0026rsquo; it tested much higher than that. Load Balancer is actually getting smarter now, it is not just the round-robin as it was before, it now will do load balancing policies.  ","date":"Aug 27, 2012","img":"","permalink":"/posts/2012-08-27-2012822vcenter-network-security-formerly-vshield/","series":null,"tags":null,"title":"vCloud Network Security (formerly vShield)"},{"categories":["technology"],"content":"Here are the programs and things that I need on a daily business to get my job done.\n1. Instapaper - While reading blogs, security news and other information; I log the pages to instapaper.\n2. Evernote - I have an AppleScript that takes items from Instapaper and places them into Evernote for later retrieval. I also use Evernote to keep wikis and other documents for easy search and access.\n3. Skype - Great VoIP client and IM client, best of all it is secure where AIM, MSN and others are clear text.\n4. iA Writer - One of the best writers that I have found for capturing thoughts, notes and blog posts. It is simple, slimmed down, and just works. It works with iCloud to keep all the docs in sync between my iDevices and Mac.\n5. MindNode Pro - Before heading to iA Writer I mind map out my document in detail; mostly in order to get my thoughts in order.\n6. OmniOutliner Pro - Once I have the mind map created I import it into OmniOutliner, where I can then edit the map, and add depth to the discussion points. From there I export it to a mark down file then into iA Writer for final editing.\n7. MS Word - Once iA Writer has my document, I need to be able to put it a format that the tech writers can use. So to MS Word, for styling and final proof reading. 8. OmniFocus - My GTD application, works great, I am able to use Apple Mail rules and formatting to put tasks in to OmniFocus remotely. OmniFocus also has great iDevice applications that allow for GTD on the go.\n9. TextExpander - Working in a company that uses acronyms for everything, TextExpander allows me to type those acronyms and have them expanded for the final document.\n10. SpiderOak - Securely keeps my machines in sync.\nOther programs on my Mac that I use\u0026hellip; gfxCardStatus - - Keeps tabs on my graphics card, for optimal battery life.\ngeektool - I have my RAM usage, network status and date on my desktop.\nAdium - Best IM client for the Mac\nTweetbot - It may be in Alpha and crash sometimes, it is a blessing, compared to TweetDeck\n","date":"Aug 16, 2012","img":"","permalink":"/posts/2012-08-16-2012816how-i-get-things-done/","series":null,"tags":["gtd"],"title":"How I Get Things Done"},{"categories":null,"content":"Barcelona is going to be the first VCDX5 defenses, meaning you can submit a vSphere design and only be questioned on vSphere 5.x features. Sure with the current program you can submit vSphere 5 designs, but you will only receive a VCDX4 certification. So the real question what changes with VCDX 5?\nThe short answer is nothing. Nothing changes from all the blog posts and information that is out there for VCDX 5.\n","date":"Jul 18, 2012","img":"","permalink":"/posts/2012-07-18-2012718vcdx-5/","series":null,"tags":null,"title":"VCDX 5"},{"categories":null,"content":"Consider voting for session 1314, 1315 and 1628 here . Here is a brief on what you will learn\u0026hellip;\nSession 1314 Will cover how vShield App can make use of a single Layer 3 network with multiple security zones in the same network with access control and auditing from server to server communications. It will also cover how vShield App will assist with passing audits and security tests.\nSession 1315 Will cover how to recover from a site outage and how to restore services in a DR or BC scenario. It will also cover how to restore vShield Edge/App from corruption or failures as well.\nSession 1628 Mark Achtemichuk and I will cover how to make sure that your vCloud installation is running at 110% and will show you how allocation models can effect performance for the better or worse! Are you ready to run a vTornado?\n","date":"May 30, 2012","img":"","permalink":"/posts/2012-05-30-2012530vmworld-sessions-html/","series":null,"tags":["vmware","vmworld","vshield"],"title":"VMworld Sessions"},{"categories":["technology"],"content":"I recently moved from Sugar Sync with over 60GB stored to SpiderOak for cloud based storage of documents, pictures and other data. Before I explain why here is a quick overview on how they work differently (based on the documentation on their web sites).\nSugarSync Data is transmitted unencrypted to SugarSync through a encrypted SSL/TLS connection to the SugarSync servers. The data is then encrypted and stored on the SugarSync servers for later retrieval. This means that if SugarSync is \u0026lsquo;hacked\u0026rsquo; or subpoenaed by a law enforcement agency they can have access to all of your data.\nWhile I do not store sensitive information outside of secure containers (think TruCrypt files), it still concerned me enough to find a new cloud storage provider.\nSpiderOak SpiderOak does things differently, they do not want to know what information you store or how to get to it. Data is encrypted on the local machine before it is sent over a SSL/TLS connection to the SpiderOak servers. The key is based off the password that is used to create the account. This means that SpiderOak does not know your password or the encryption key for your data. Which ultimately means that if they are subpoenaed by a law enforcement agency, the only data that they can hand over is a jumble of random data bits.\nIs there a perfect solution of course not; given enough time and enough resources any encryption method will fail. SpiderOak utilizes AES256 for their encryption. Assuming 10 billion billion keys per second, it would take 3 x 10^51 years; longer than the data I store is usable (barely).\nIf you want to try SpiderOak here go here . First 2GB is free, after that for $75/yr you can get 75GB (use the promo code \u0026lsquo;spring\u0026rsquo;), normally it is $100. Unlimited computers and devices, 100GB stored (compressed/de-duplicated) data.\n","date":"Apr 27, 2012","img":"","permalink":"/posts/2012-04-27-2012427spideroak-v-sugar-sync-html/","series":null,"tags":["cloud-storage"],"title":"SpiderOak v. Sugar Sync"},{"categories":["vmware-vc-ops"],"content":"Here is a compliation of links for vCenter Operations Manager 5 or Vc Ops for short.\nOfficial VMware Documentation http://www.vmware.com/support/pubs/vcops-pubs.html \u0026hellip;especially the Advanced Getting Started guide http://www.vmware.com/pdf/vcops-5-getting-started-guide.pdf VMware Community Site http://communities.vmware.com/community/vmtn/server/vcenter/vcops VMware TV on YouTube - several videos: VMware vCenter Operations 5.0 - Introduction Video http://www.youtube.com/watch?v=Z-DJuTiqKag VMware vCenter Operations Manager 5.0 - Install and Configure http://www.youtube.com/watch?v=pwRdGDhI0lc\u0026amp;feature=relmfu TheSaffaGeek.co.uk http://thesaffageek.co.uk/tag/vcenter-operations-manager/ vExperienced.co.uk http://www.vexperienced.co.uk/2012/04/10/vcenter-operations-v5-intro/ http://www.vexperienced.co.uk/2012/04/12/using-vcenter-operations-v5-crazy-cool/ http://www.vexperienced.co.uk/2012/04/16/using-vcenter-operations-v5-capacity-features-and-conclusions-33/ Iwan Rahabok technical deep-dive @ Community site (large PPT) http://communities.vmware.com/docs/DOC-18592 virtual-red-dot.blogspot.co.uk (several posts) http://virtual-red-dot.blogspot.co.uk/ VMware KB 2012021 - Working with Alert Notification Rules in vCenter Operations Manager http://kb.vmware.com/selfservice/microsites/search.do?language=en_US\u0026amp;cmd=displayKC\u0026amp;externalId=2012021 Tutorial: Building Custom Dashboards in vCOps http://velemental.com/2012/04/12/tutorial-building-custom-dashboards-in-vcops/ Rightsizing VMs using vCenter CapacityIQ - Part 1 http://blogs.vmware.com/management/2010/06/rightsizing-vms-using-vcenter-capacityiq-part-1.html  Rightsizing VMs using vCenter CapacityIQ - Part 2 http://blogs.vmware.com/management/2010/06/rightsizing-vms-using-vcenter-capacityiq-part-2.html Generating SSL Certificates for vCenter Operations Manager 5.0 http://www.bussink.ch/?p=458 vCOps sessions at VMworld ’11 http://www.vmworld.com/community/sessions ","date":"Apr 18, 2012","img":"","permalink":"/posts/2012-04-18-2012417vcenter-operations-manager-5-guides-html/","series":null,"tags":["vc-ops","vcenter"],"title":"vCenter Operations Manager 5 Guides"},{"categories":["vmware-vcm"],"content":"vCM or vCenter Configuration Manager 5.5 was released in March by VMware with a few new features. First of all and the topic of this blog post, is the re-inclusion of a split install. Split install being the database, application and web page can be on different servers.You ask didn\u0026rsquo;t vCM or SCM or ECM (depending on when you used vCM last) have this feature before? It did back in the 5.4 and earlier, in 5.4.1 VMware removed the feature so that it could be re-engineered and designed.The split install in vCM 5.5 allows for 3 different installs; all in one, database on one server and app/web on another, or all on separate servers. The SQL Reporting Server can be anywhere as long as it is reachable.Those familiar with vCM\u0026rsquo;s install will know that something called \u0026lsquo;Foundation Checker\u0026rsquo; will dig through your system and find any missing dependencies or bad settings.\nNow for the gotcha… vCM expects that the database server name and the name in the connection string to be the same. In a single server (or all in one) install Foundation Checker will check this for you. In a split install Foundation Checker runs at the start of the install and not after you enter all the settings for vCM.While going through the install the you supply the DB server name, what is entered here MUST be what SQL returns for this command:\n use master; select @@servername\n If you need to change what is returned to be a FQDN or something other than what is returned do this now, before continuing the install (you will thank me later). MS MSDN has a good write up on how to do this here .\nWhat happens if I ignore the above? Well first off the Install will complete without error; however the collector service will not stay started post install. SQL logs will have errors like \u0026lsquo;ECMStatusUser\u0026rsquo; not defined or not allowed login. The collector service will start then stop about 5 - 10 seconds later without error in the Windows event log.\nHow can you fix this after the install completes? The easy answer is to un-install and re-install. If you are dead set on getting the thing to work here is what you can do.First you will need to run some SQL commands.\n sp_helpserver\n Take note of the name of the server returned. Now we need to drop that server.\n sp_dropserver  You will get errors about remote logins when doing this. This is due to vCM creating logins that really do not work or exist during the install due to SQL configuration issues. To force the removal use this command.\n sp_dropserver , droplogins\n Now you will need to re-add the correct server name, add what you typed into the installer (i.e. the FQDN) with.\n sp_addserver , local\n Restart the SQL service. Now you can start the vCM Collector service. This will get your installation working, there are some other things inside of vCM that will need correcting. For instance you need to do a machines collection from the collector, then you will need to re-trust the vCM collector.Again I recommend that you just uninstall and re-install with the correct settings. You will however need to fix SQL and make sure that the server name is correct.\n","date":"Apr 12, 2012","img":"","permalink":"/posts/2012-04-12-2012411vcenter-configuration-manager-split-install-issues-html/","series":null,"tags":["configuration-manger","vcenter","vcm"],"title":"vCenter Configuration Manager Split Install Issues"},{"categories":["vmware-vsphere"],"content":"The vCenter Server Appliance comes with a built-in DB2 database for use as an all-in-one solution for small lab environments. The sizing is supposed to be less than 5 hosts and 50 VMs. But it can work much higher than that if given enough resources, :-).\nOne issue that occurs when using this appliance is that the DB2 log settings are too small for any extended operation. This is due to stat roll-up jobs taking more log space to complete than the DB2 instanace is set for. Symptoms of this will be your vCenter service resetting itself every so often, you can verify this happening by watching the vpxd.log file for the line \u0026ldquo;Transaction log full\u0026rdquo; and the service dying shortly after that. The way I found it is that my vSphere Client would disconnect and ask for me to log back in everyonce in a while.\nThe easy(-ish) fix for this is to do the following:\nSSH to the vCenter Appliance, if you left the default the username is \u0026lsquo;root\u0026rsquo; and the password is \u0026lsquo;vmware\u0026rsquo;. Once you are SSH\u0026rsquo;ed to the box you will need to change to the DB2 user.   su -l db2inst1\n Check your current log setting by running:   db2 get db cfg for vCDB | grep log\n This will show you something like this:\n User exit for logging status = NO\nCatalog cache size (4KB) (CATALOGCACHE_SZ) = 300\nNumber of primary log files (LOGPRIMARY) = 128\nNumber of secondary log files (LOGSECOND) = 16\nChanged path to log files (NEWLOGPATH) =\nPath to log files = /storage/db/db2/home/db2inst1/db2inst1/NODE0000/SQL00001/SQLOGDIR/\nOverflow log path (OVERFLOWLOGPATH) =\nMirror log path (MIRRORLOGPATH) =\nFirst active log file =\nBlock log on disk full (BLK_LOG_DSK_FUL) = NO\nBlock non logged operations (BLOCKNONLOGGED) = NO\nPercent max primary log space by transaction (MAX_LOG) = 0\nNum. of active log files for 1 active UOW(NUM_LOG_SPAN) = 0\nPercent log file reclaimed before soft chckpt (SOFTMAX) = 520\nUser exit for logging enabled (USEREXIT) = OFF\nHADR log write synchronization mode (HADR_SYNCMODE) = NEARSYNC\nFirst log archive method (LOGARCHMETH1) = OFF\nOptions for logarchmeth1 (LOGARCHOPT1) =\nSecond log archive method (LOGARCHMETH2) = OFF\nOptions for logarchmeth2 (LOGARCHOPT2) =\nFailover log archive path (FAILARCHPATH) =\nNumber of log archive retries on error (NUMARCHRETRY) = 5\n To change the log file sizing run the following:   db2 UPDATE DB CFG FOR VCDB USING logprimary 128 logsecond 16 logfilsiz 8192\n For the setting to take effect you will need to reboot the appliance. Once the vCenter Appliance is running again you can check/watch the log files being created.   ls -lah /storage/db/db2/home/db2inst1/db2inst1/NODE0000/SQL00001/SQLOGDIR/\n ","date":"Feb 24, 2012","img":"","permalink":"/posts/2012-02-24-2012223vcenter-server-appliance-database-html/","series":null,"tags":["vcenter","vcenter-appliance","vsphere-5"],"title":"vCenter Server Appliance Database"},{"categories":["vmware-vsphere"],"content":"With the removal of the service console with vSphere 5, in the form of ESXi, netstat went by the way side. The way to get that information is by executing this on the console. Either in tech support mode (SSH) or at the console.\n esxcli network ip connection list\n ","date":"Jan 31, 2012","img":"","permalink":"/posts/2012-01-31-2012131netstat-for-esxi-html/","series":null,"tags":["cli","esxi","vsphere"],"title":"netstat for ESXi"},{"categories":["vmware-vsphere"],"content":"I was asked recently on my opinion on nesting resource pools with VMs inter-mixed, well what should you do?\nWell here is an easy example; if I have a Resource Pool with 9 VMs and 1 nested Resource Pool, what level of resources are each given? 10% each.\nThink about that, each of the VMs have 10% of the resources and the ENTIRE nested Resource Pool has 10% of the resources. How many VMs are in that nest Resource Pool? Lets assume 10 VMs.\nWhat entitlement to the resources does a single VM in the nested Resource Pool have? 10% of the nested Resource Pools resources, which is 10% of the parents Resource Pool. So this one VM will get 1% of the parent Resource Pools resources.\nHow can this problem be fixed? A better practice is to not have Resource Pools and VMs to exist at the same level of the tree. The above example would be changed to have 2 Resource Pools under the parent Resource Pool. One Resource Pool could be named \u0026lsquo;prod\u0026rsquo; and the other Resource Pool named \u0026lsquo;development\u0026rsquo;. The \u0026lsquo;prod\u0026rsquo; Resource Pool would be given normal shares and the \u0026lsquo;development\u0026rsquo; Resource Pool would be given low shares. So now what is the resource allocation to each?\nThe \u0026lsquo;prod\u0026rsquo; Resource Pool will have 2/3 of the total parent Resource Pool, and the \u0026lsquo;development\u0026rsquo; Resource Pool would have 1/3 of the parent Resource Pool. This still does not guarantee that \u0026lsquo;prod\u0026rsquo; will have access to resources. This setting is just a guarantee that in a contention scenario, that \u0026lsquo;prod\u0026rsquo; will be given higher priority to resources.\nHow can you guarantee resources to \u0026lsquo;prod\u0026rsquo;? Reservations for the \u0026lsquo;prod\u0026rsquo; Resource Pool or setting a limit on the \u0026lsquo;development\u0026rsquo; Resource Pool.\n","date":"Dec 15, 2011","img":"","permalink":"/posts/2011-12-15-20111215nesting-resource-pools-good-idea-or-bad-html/","series":null,"tags":["resource-pools","vsphere"],"title":"Nesting Resource Pools; Good Idea or Bad?"},{"categories":["vmware-vcloud"],"content":"In VMware\u0026rsquo;s vCloud Director, when a VM is deployed using the guest customization, you can either supply a password for the administrator user or have vCloud auto-generate a password. The auto-generated passwords are 8 characters long and use upper-case, lower-case, numbers and special characters for example \u0026ldquo;q#Tv21*a\u0026rdquo;. If the 8 characters is not long enough for you you can increase the character length by changing a field in the database.\nIn both the Oracle and SQL database there is a field in the CONFIG table called \u0026lsquo;AdminPasswordLength\u0026rsquo;, simply change this field to be any number that you would like your passwords to be generated with.\nSomething like this:\n update config\nset value = 16 \u0026ndash; required length\nwhere cat = \u0026lsquo;settings\u0026rsquo; and name = \u0026lsquo;AdminPasswordLength\u0026rsquo;;\ncommit;\n Just do not go over 64 characters as you may get some un-expected results in the OS you are customizing.\n","date":"Sep 15, 2011","img":"","permalink":"/posts/2011-09-15-2011915changing-the-auto-generated-passwords-in-vcloud-html/","series":null,"tags":["guest-customization","vcloud"],"title":"Changing the auto generated passwords in vCloud"},{"categories":["vcdx-process"],"content":"I have been asked many times about the VCDX Defense process. Especially, what to do and what not to do? What is the defense really like? Are the panelists really mean? Do they throw flaming daggers at candidates? and the such\u0026hellip; So here are some pointers, tips and other information.\nDesign Defense First off, the panelists do NOT have flaming daggers that get thrown at the candidates. The panelists use soft squishy Nerf balls. Now kidding aside what is a defense like?\nYou are given 75 minutes to defend the vSphere design that you submitted a few months prior. During this 75 minutes it is generally okay (and recommended) to give a short 15 minute presentation on your design and who you did the design for. The key point here is SHORT, do not plan on taking 50 minutes to present your design to the panelists, there are questions and items that the panelists need answered in order to complete the scoring guide. If you run out of time and do not cover a section (i.e. networking) then the panelists will be unable to give you a score for that section, and your score will suffer.\nAt end of your slide deck it is very helpful to have all of your Visio diagrams pasted into a few slides, so that they can be referenced as needed during the defense. Yes the panelists have your application and diagrams in front of them, but it is really handy if you can point to an item on a large screen as opposed to a piece of paper, or waste time recreating the diagram on the whiteboard.\nMake sure that the question you are answering is the one asked; if the question is about the technical merits of the storage design, do not answer with something about the logical setup of the storage.\nFocus on the question, keep the answers detailed but short so that you can get to more questions and more of the scoring guide filled out.\nRemember the panelists did the defense once as well, and just like you the panelists experienced the pain and anxiety, it is fine to be nervous just do not let it become a distraction from your great work.\nBefore you come into the room to complete your defense you should ask to bring a glass of water or a can of soda (liquor is highly discouraged until after completing the entire defense). 75 minutes of talking can be taxing, so feel free to take sips as needed. Just remember the clock does not stop for your water breaks.\nThe design you submitted is scored on both the technical merits and the logical merits of the design. Just because you can talk circles around the technical aspects, does not mean you will pass; you must be able to talk circles around the logical portions as well. I will say that again, being an expert in design does not make a VCDX and neither does being an expert in technical troubleshooting. A VCDX must posses a high level of knowledge, confidence, and the ability to convey both of these attributes.\nBreak Time Now you get a 20 minute break\u0026hellip; use the break to hit the bathroom, get a new glass of water, and RELAX. The hardest part is over (well\u0026hellip; hardest in my opinion). Up next are the design scenario and the design troubleshooting. The panelists at this point have magically transformed into a customer that needs a new design and a design fixed.\nDesign Scenario This portion is all about your thought process, the panelists do not expect a completed design or for the solution to the troubleshooting scenario.\nThe design scenario is 30 minutes of a customer that needs a vSphere design with certain restrictions, contraints, requirements and assumptions. No, you will not be given all of the information needed, you have to ask for it. Remember this is about your thought process, and no the panelists can NOT read your mind, so make sure to think aloud. There is always a whiteboard, feel free to use it. Fill it up, make pictures, anything to help show your thought process.\nThe design scenario is scored much like the defense of the design that you submitted. Make sure that you cover as many topics as you can (technically and logically).\nDesign Troubleshooting This section just like the first is just like the previous design scenario. The panelists want to see and hear your thought process on how to fix the problem. Anything you want or need the panelists can and will get the information for you, if you need to know the CPU RDY, or WAIT times the panelists have that information. If you want to know the serial number of the CPU on the 3rd blade server\u0026hellip; well the panelists do not have that nor should you need it.\nIs there a solution to the design troubleshooting? Yes, there is a solution to the design troubleshooting. No, you will not be given the answer at the end and you will not find out if you actually solved it.\nAfter that, you get a few minutes to comment on the process, and then you are done. About a week after the defense you will get an email with your results.\nI wish you all good luck! Remember the panelists are not there to beat you up or throw items at you, all the panelists have been where you are and know the stress you are under.\n","date":"Sep 10, 2011","img":"","permalink":"/posts/2011-09-10-201199how-to-become-a-vcdx-or-at-least-have-a-less-painful-defense-html/","series":null,"tags":["vcdx","vsphere"],"title":"How to become a VCDX... Or at least have a less painful defense"},{"categories":["vmware-vcloud"],"content":"With vCloud 1.x and even back in Lab Manager 3.x and 4.x the default behavior for capturing and deploying VMs to the Library (LM term) or Catalog (vCloud term) has been to keep the BIOS.UUID the same for all subsequent VMs. This allows those products that tie their license to the machine serial number to keep workign when re-deployed on vCloud or LM. Let\u0026rsquo;s back up what is the BIOS.UUID? The BIOS.UUID is randomly generated when the VM is created on vSphere, this value can be duplidated on a vSphere or vCenter instance, meaning it is not a unique identifier. The BIOS.UUID is what the VM or guest queries when it looks for the \u0026lsquo;machine serial number\u0026rsquo;. Hence when a software product (Microsoft Windows, SQL, and other vendors products) look for a way to identify what machine it is installed on it uses the machine serial or BIOS.UUID. If we go changing this value we can break software licenses or installations since the value is no longer the same as when it was installed.\nProblems arise from this when software products report back to a central database with the machine name and machine serial number for compliance checks or other needs. For example if I have a domain controller and SQL server with the same BIOS.UUID (they may have been deployed from the same vCloud Catalog entry) with Trend Micro (or most other A/V products) installed. When that product reports the status of the installed A/V back to the control center, there is a conflict: I have two macines with different names but the same serial number reporting back. Most products will only report the last machine to report in for its status, so I could have a system that has a very old A/V definitions but never know it due to the conflict in serial numbers.\nWith vCloud 1.5 there is a database entry that can be changed to allow for vCloud on deployment from catalog entries that will change the BIOS.UUID of each VM; but this will cause problems with software products that will either require re-activation or re-entering the license key since that product may indicate that the underlying machine is different.\nHow to make the change:\n In the vCloud database (either SQL or Oracle), in the CONFIG table there is an entry named: backend.cloneBiosUuidOnVmCopy Change the default value of 1 to 0 to force vCloud to start changing BIOS.UUID\u0026rsquo;s Restart the VMware vCloud Service on all vCloud Director cells  This will NOT change currently deployed VMs and is a cloud wide setting affecting ALL VMs/vApp\u0026rsquo;s being deployed from now on (or until changed back to 1).\n","date":"Sep 8, 2011","img":"","permalink":"/posts/2011-09-08-201198vcloud-15-biosuuid-changes-html/","series":null,"tags":["vcloud","vsphere"],"title":"vCloud 1.5 Bios.UUID Changes"},{"categories":["microsoft-hyper-v"],"content":"Recently I have seen quite a bit of question and discussion of how vSphere handles disk writes from the guest OS and performance questions about limiting the writes.\nThe question started off innocently as \u0026ldquo;How can we gaurantee vSphere disk writes happen and are not cached?\u0026rdquo;\nFirst lets analyze where this may have started SQL Solutions posted this article , in which they tested SQL server on a VMware virtual machine and tested the write caching of the DB and the virtual machine. The fatal flaw with this test is that they used VMplayer which is NOT vSphere and works nothing like vSphere does with disk writes. VMplayer (as well as Workstation and Fusion) does cache results (which is what they have shown), where as vSphere behaves completely differently.\nvSphere writes are handled differently since vSphere is an Enterprise server class software product. Each and every write that a guest does is not confirmed in the operating system until it has been confirmed by the underlying storage array. vSphere since ESX 3.x has behaved like this.\nThis is true for NFS and SCSI based storage.\nDoes that mean that the data actually made it to a spindle? NO\nvSphere only knows that the storage array has confirmed the write has happened, it could still be in the cache of the storage array, this could be the cache of the RAID controller or the SAN storage array. Now most of these enterprise storage class arrays have built in batteries to write all items in the cache to disk system in the event of a power failure; but that is out of the vSphere control.\nSo how do you maintain storage consistancy and data integrity? The simple answer is use enterprise storage and ensure that the battery backed cache or UPS for the array can either outlast the power outage (i.e. generator power up or utilities being restored).\nOptions like FUA (Force Unit Access) are not feasible since modern HBA\u0026rsquo;s, RAID controllers, SAN\u0026rsquo;s and file systems strip this control bit from the IO, also to use FUA for this each and every I write IO would require the FUA bit to be set.\n","date":"Sep 1, 2011","img":"","permalink":"/posts/2011-09-01-201191vsphere-disk-write-process-html/","series":null,"tags":["disk","san","vsphere"],"title":"vSphere Disk Write Process"},{"categories":null,"content":"In order to remove the vCloud agents from vSphere 5 hosts you need to execute the following command on the console:\n esxcli software vib remove –n vcloud-agent\n This can be ran by the PowerCLI or the vSphereCLI or on the SSH console with tech support mode enabled.\nReboot the hosts after this step to complete the removal.\n","date":"Aug 29, 2011","img":"","permalink":"/posts/2011-08-29-2011829removing-the-vcloud-agent-from-esxi-hosts-html/","series":null,"tags":["vcloud","vsphere-5"],"title":"Removing the vCloud agent from ESXi hosts"},{"categories":["vmware-vsphere"],"content":"When importing a VM or vApp from vCenter into vCloud you may see an error like this:\n  A specified parameter was not correct.\n spec.deviceChange.device.port.switchUuid\n This can happen when comign from a Cisco Nexus 1000v Portgroup, to solve this either remove the network adapter for importing into the cloud, or move the network card to a portgroup that is not a Nexus 1000v Portgroup.\nIf you are using a dVS and see this error move the NIC to a standard vSwitch or delete the NIC and re-add it once it is in the cloud.\n","date":"Aug 24, 2011","img":"","permalink":"/posts/2011-08-24-2011824importing-vapp-from-vcenter-error-html/","series":null,"tags":["cisco-nexus","vcloud"],"title":"Importing vApp from vCenter Error"},{"categories":["vmware-vsphere"],"content":"When VMware released the vRam pricing models and limits last week there was quite an uproar over the limitations being set to low. It appears that VMware was listening and has responded with a hefty increase in vRam allocations.\nThat is nearly double the entitlements.\nAlso changing is how the usage is calculated for a high water mark (think bursting for a day) to a rolling 12 month average!\nFinally the last news and some major news at that, is that a single VM can only consume 96GB of vRam, no matter how you set the VM up! (i.e. give a VM 1TB of RAM but only have 96GB count against the vRam pool!)\n","date":"Aug 3, 2011","img":"","permalink":"/posts/2011-08-03-201183vsphere-5-vram-licensing-changes-html/","series":null,"tags":["vmware","vsphere"],"title":"vSphere 5 vRam Licensing Changes"},{"categories":null,"content":"If your vCloud Director machine is on the same vCenter as the Compute Clusters are (not a best practice but it does work), you can not have the same vCloud Director machine name in vCenter as you named the vCloud installation during installation.\nThis will produce an error such as “The already exists.”\nThis is because vCenter Folders and Virtual Machines can not have identical names. Can the host name be the same? Sure! You just can not have a VM Display name and a PvDC Name the same.\nHow do you fix it?\nRename the offending VM’s name (i.e. add -cell1 to the end) or drop the vCloud DB and re-run the installation to re-create the vCloud Instances name.\n","date":"Jul 22, 2011","img":"","permalink":"/posts/2011-07-22-2011722error-in-vcenter-when-creating-a-pvdc-in-vcloud-director-1-html/","series":null,"tags":["vcenter","vcloud","vsphere"],"title":"Error in vCenter when creating a PvDC in vCloud Director"},{"categories":null,"content":"Can vCloud Director be installed with ESXi in lockdown mode?\nThe short answer is \u0026lsquo;No\u0026rsquo;\u0026hellip; But the longer answer is \u0026lsquo;Yes\u0026rsquo;.\nTo allow the vCloud agents to be installed on the ESXi host, lock down mode has to be disabled; BUT after the vCloud agents are installed feel free to lock it down again.\nSee with vCloud all answers have a but. :-)\n","date":"Apr 19, 2011","img":"","permalink":"/posts/2011-04-19-2011419vcloud-on-esxi-with-lockdown-mode-html/","series":null,"tags":null,"title":"vCloud on ESXi with Lockdown mode"},{"categories":["vmware-vsphere"],"content":"In vCloud director it may be necessary to deploy an identical vApp, when this happens everything is identical (including UUID\u0026rsquo;s), to help vSM differentiate the VMs changing the UUID may help.\n$date = get-date -format \u0026ldquo;dd hh mm ss\u0026rdquo;\n$newUuid = \u0026ldquo;56 4d 50 2e 9e df e5 e4-a7 f4 21 3b \u0026quot; + $date\n$spec = New-Object VMware.Vim.VirtualMachineConfigSpec\n$spec.uuid = $newUuid\n$vm = get-vm echo \u0026ldquo;VM: \u0026quot; $VM.name \u0026ldquo;New UUID: \u0026quot; $newuuid\n$vm.Extensiondata.ReconfigVM_Task($spec)\nOriginal credit goes to this man and site: http://derek858.blogspot.com/2010/10/making-your-vmware-vm-uuids-unique.html ","date":"Feb 18, 2011","img":"","permalink":"/posts/2011-02-18-2011218how-to-change-the-uuid-of-a-vm-via-the-powercli-html/","series":null,"tags":null,"title":"How to change the UUID of a VM via the PowerCLI"},{"categories":["microsoft-hyper-v"],"content":"ESX 3.0 thru ESX 4.0 limit the heap size for VMFS to 16MB which allows for just 4TB of VMFS files to be open at a time. Once this threshold is crossed the ESX host start to behave eradically, possible crashing the VMs that were powered on at the time. To avoid this problem you can increase the heap size to 128MB which will allow for 32TB of storage open on a single ESX host.\nThe vmKernel.log will display the following if your host is getting close to the limitation:\n WARNING: Heap: 1370: Heap_Align(vmfs3, 4096/4096 bytes, 4 align) failed. caller: 0x8fdbd0\nWARNING: Heap: 1266: Heap vmfs3: Maximum allowed growth (24) too small for size (8192)\n To correct this problem:\n Login to vCenter or use the VI client to connect directly to the ESX host in question\n  Click on the Configuration tab\n  Click Advanced Settings\n  Find and select VMFS3\n  Update the VMFS2.MaxHeapSizeMB to 128\n  Reboot the ESX host\n  ESX 4.1\u0026rsquo;s default is 80MB which will allow for 20TB to be open at once, so it is less likely to run into this issue.\nUpdate: There is a VMware KB on this problem here: http://kb.vmware.com/selfservice/microsites/search.do?language=en_US\u0026amp;cmd=displayKC\u0026amp;externalId=1004424 ","date":"Feb 15, 2011","img":"","permalink":"/posts/2011-02-15-2011215increasing-the-heap-size-for-vmfs-html/","series":null,"tags":null,"title":"Increasing the heap size for VMFS"},{"categories":["vmware-vsphere"],"content":"Here is how to limit the memory usage for VMware\u0026rsquo;s vCenter\u0026hellip;\nFirst vCenter relies on a customized Apache Tomcat to run its vCenter product (mostly graphs, Web Interface and other items), while limiting the memory hasn\u0026rsquo;t proven to have a negative effect this procedure should be done with caution. This can cause slowness in portions of the application since it will no longer be able to store large amounts of data in RAM and will have to access the database for this information.\n Open Regedit on the vCenter server\n  Navigate to: HKLMSoftwareWow6432NodeApache Software FoundationProcrun 2.0vctomcatParamatersJava\n  Change JvmMS, JvmMX and JvmSs to \u0026lsquo;0\u0026rsquo;\n  Restart the VMware vCenter WebAccess Service in Windows and enjoy a smaller footprint of the Tomcat process. The average RAM usage for Tomcat after this change should be around 256MB (plus or minus the amount of VM\u0026rsquo;s being managed).\nThis procedure should only be done in test or small environments, anything over 10 hosts should follow the defaults from VMware (1024 and 512).\n","date":"Feb 11, 2011","img":"","permalink":"/posts/2011-02-11-2011211limiting-vcenter-tomcat-usage-html/","series":null,"tags":null,"title":"Limiting vCenter TomCat Usage"},{"categories":["vmware-vsphere"],"content":"Just released from VMware vSphere 4.1 Update 1 is now out and ready for download from VMware.com.\nOr click here .\nHere is a list of the bugs and items fixed/corrected in the newest release. ESXi, ESX (with Service Console) and vCenter all have updates!\nThe number of patch definitions downloaded (15 critical/28 total):\nID: ESX410-201101201-SG Impact: HostSecurity Release date: 2011-02-10 Products: esx 4.1.0 Updates ESX 4.1 Core and CIM components\nID: ESX410-201101202-UG Impact: Critical Release date: 2011-02-10 Products: esx 4.1.0 Updates the ESX 4.1 VMware-webCenter\nID: ESX410-201101203-UG Impact: Critical Release date: 2011-02-10 Products: esx 4.1.0 Updates the ESX 4.1 esxupdate library\nID: ESX410-201101204-UG Impact: Critical Release date: 2011-02-10 Products: esx 4.1.0 Updates the ESX 4.1 mptsas device driver\nID: ESX410-201101206-UG Impact: Critical Release date: 2011-02-10 Products: esx 4.1.0 Updates the ESX 4.1 bnx2xi device driver\nID: ESX410-201101207-UG Impact: Critical Release date: 2011-02-10 Products: esx 4.1.0 Updates the ESX 4.1 bnx2x device driver\nID: ESX410-201101208-UG Impact: HostGeneral Release date: 2011-02-10 Products: esx 4.1.0 Updates the ESX 4.1 sata device driver\nID: ESX410-201101211-UG Impact: Critical Release date: 2011-02-10 Products: esx 4.1.0 Updates ESX 4.1 VMware-esx-remove-rpms\nID: ESX410-201101213-UG Impact: HostGeneral Release date: 2011-02-10 Products: esx 4.1.0 Updates ESX 4.1 net-enic device driver\nID: ESX410-201101214-UG Impact: Critical Release date: 2011-02-10 Products: esx 4.1.0 Updates ESX 4.1 qla4xxx device driver\nID: ESX410-201101215-UG Impact: Critical Release date: 2011-02-10 Products: esx 4.1.0 Updates ESX 4.1 net-nx-nic device driver\nID: ESX410-201101216-UG Impact: HostGeneral Release date: 2011-02-10 Products: esx 4.1.0 Updates the ESX 4.1 vaai plug-in\nID: ESX410-201101217-UG Impact: Critical Release date: 2011-02-10 Products: esx 4.1.0 Updates the ESX 4.1 e1000e device driver\nID: ESX410-201101218-UG Impact: Critical Release date: 2011-02-10 Products: esx 4.1.0 Updates ESX 4.1 net-cdc-ether driver\nID: ESX410-201101219-UG Impact: HostGeneral Release date: 2011-02-10 Products: esx 4.1.0 Updates the ESX 4.1 e1000 device driver\nID: ESX410-201101220-UG Impact: HostGeneral Release date: 2011-02-10 Products: esx 4.1.0 Updates the ESX 4.1 igb, tg3, scsi-fnic\nID: ESX410-201101221-UG Impact: Critical Release date: 2011-02-10 Products: esx 4.1.0 Updates ESX 4.1 HP SAS Controllers\nID: ESX410-201101222-UG Impact: Critical Release date: 2011-02-10 Products: esx 4.1.0 Updates ESX 4.1 mptsas, mptspi drivers\nID: ESX410-201101223-UG Impact: HostGeneral Release date: 2011-02-10 Products: esx 4.1.0\n3w-9xxx: scsi driver for VMware ESX\nID: ESX410-201101224-UG Impact: HostGeneral Release date: 2011-02-10 Products: esx 4.1.0\nvxge: net driver for VMware ESX\nID: ESX410-201101225-UG Impact: Critical Release date: 2011-02-10 Products: esx 4.1.0 Updates vmware-esx-pam-config library\nID: ESX410-201101226-SG Impact: HostSecurity Release date: 2011-02-10 Products: esx 4.1.0 Updates glibc packages\nID: ESX410-Update01 Impact: Critical Release date: 2011-02-10 Products: esx 4.1.0 VMware ESX 4.1 Complete Update 1\nID: ESXi410-201101201-SG Impact: HostSecurity Release date: 2011-02-10 Products: embeddedEsx 4.1.0 Updates the ESXi 4.1 firmware\nID: ESXi410-201101202-UG Impact: Critical Release date: 2011-02-10 Products: embeddedEsx 4.1.0 Updates the ESXi 4.1 VMware Tools\nID: ESXi410-201101223-UG Impact: HostGeneral Release date: 2011-02-10 Products: embeddedEsx 4.1.0\n3w-9xxx: scsi driver for VMware ESXi\nID: ESXi410-201101224-UG Impact: HostGeneral Release date: 2011-02-10 Products: embeddedEsx 4.1.0\nvxge: net driver for VMware ESXi\nID: ESXi410-Update01 Impact: HostGeneral Release date: 2011-02-10 Products: embeddedEsx 4.1.0 VMware ESXi 4.1 Complete Update 1\n","date":"Feb 11, 2011","img":"","permalink":"/posts/2011-02-11-2011211vsphere-41-update-1-html/","series":null,"tags":null,"title":"vSphere 4.1 Update 1"},{"categories":null,"content":"Back in October (October 25th) to be more exact; I left my old company for VMware. Not that my previous employer wasn\u0026rsquo;t a good place to work I had just outgrown them and needed a new greener pasture to continue growing professionally.\nMy new role at VMware is as a Sr. Consultant with the vCloud Services Team. What does that mean exactly? In a nutshell I will be helping VMware customers plan, develop and deploy their own Private, Hybrid and/or Public Clouds.\nI have not been posting to my blog as often as I desired or want to be able to do, due to the new job and learning my new role. Hopefully in the next few weeks you will see new posts and new items coming from me and possibly other posters in this space.\n","date":"Jan 27, 2011","img":"","permalink":"/posts/2011-01-27-2011127new-job-html/","series":null,"tags":null,"title":"New Job..."},{"categories":["vmware-vsphere"],"content":"For the past few weeks I have been working on an issue with a vCenter 4.1 database to work properly and to complete stat roll-ups without error. Here are some of the tricks and things that I have found to help identify the problem and possibly fix it for some.\n Check the HIST_STAT tables for fragmented indexes and possible performance issues (execute the following in the SQL Management Studio targeting your vCenter database):\ndbcc showcontig (VPX_HIST_STAT1)\ndbcc showcontig (VPX_HIST_STAT2)\ndbcc showcontig (VPX_HIST_STAT3)\ndbcc showcontig (VPX_HIST_STAT4)\ngo\nThe results will look like this:\n DBCC SHOWCONTIG scanning \u0026lsquo;VPX_HIST_STAT1\u0026rsquo; table\u0026hellip;\nTable: \u0026lsquo;VPX_HIST_STAT1\u0026rsquo; (882102183); index ID: 1, database ID: 7\nTABLE level scan performed.\n- Pages Scanned\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;..: 534985\n- Extents Scanned\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;: 67439\n- Extent Switches\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;: 311950\n- Avg. Pages per Extent\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;: 7.9\n- Scan Density [Best Count:Actual Count]\u0026hellip;\u0026hellip;.: 21.44% [66874:311951]\n- Logical Scan Fragmentation \u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;: 53.34%\n- Extent Scan Fragmentation \u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;.: 11.30%\n- Avg. Bytes Free per Page\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;: 3433.6\n- Avg. Page Density (full)\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;\u0026hellip;: 57.58%\n The two critical lines are the Scan Density and the Logical Scan Fragmentation (from MSDN):\n Scan Density\n[Best Count: Actual Count] Best count is the ideal number of extent changes if everything is contiguously linked. Actual count is the actual number of extent changes. The number in scan density is 100 if everything is contiguous; if it is less than 100, some fragmentation exists. Scan density is a percentage.\n  Logical Scan Fragmentation Percentage of out-of-order pages returned from scanning the leaf pages of an index. This number is not relevant to heaps and text indexes. An out of order page is one for which the next page indicated in an IAM is a different page than the page pointed to by the next page pointer in the leaf page.\n If the Scan density is below 50% and/or if the logical scan fragmentation is above 50% then you should complete step 2 to help optimize those tables. (Scan Density will quickly drift in a vCenter installation with more than 50 hosts or 500 VMs)\n  If your table indexes are approaching below 50% Scan Density or above 50% Logical Scan Fragmentation, do the following in the SQL Management Studio:\ndbcc dbreindex( \u0026lsquo;vpx_hist_stat1\u0026rsquo;,\u0026lsquo;pk_vpx_hist_stat1\u0026rsquo;, 70)\ndbcc dbreindex( \u0026lsquo;vpx_hist_stat2\u0026rsquo;,\u0026lsquo;pk_vpx_hist_stat2\u0026rsquo;, 70)\ndbcc dbreindex( \u0026lsquo;vpx_hist_stat3\u0026rsquo;,\u0026lsquo;pk_vpx_hist_stat3\u0026rsquo;, 70)\ndbcc dbreindex( \u0026lsquo;vpx_hist_stat4\u0026rsquo;,\u0026lsquo;pk_vpx_hist_stat4\u0026rsquo;, 70)\nThe above commands will re-index each of the primary indexes on the table. This process may take a few minutes depending on the load on the SQL server, this does lock the index on the table while completing, so do it during a slow time.\n  Determining table sizes:In the SQL Management Studio you can execute the following to show exactly what tables are growing larger and possibly causing problems with performance.\n If your vCenter has been around for a while or just has a lot of use the VPX_EVENT or VPX_EVENT_ARG tables will be large (millions of rows), you can reduce the size of these by setting the \u0026lsquo;Database Retention Policy\u0026rsquo; in vCenter to around 180 days or what your organization feels is needed for accurate logging.\nThe tables vpx_hist_stat1, and vpx_hist_stat2 will contain many, many, many rows; this is where vCenter stores the performance metrics for daily and weekly stats (3 is for monthly and 4 is yearly). If your retention for the daily is above 1 day or your detail setting is set high (3 or higher), you will have more rows than others. These tables operate fine until they reach ~100 million rows (although performance issues can start around 50 million, depending on the SQL server hardware).\nIf your vpx_hist_stat1 table is approaching 100 million rows or possibly even higher, chances are good that the rollup procedure will start to fail soon, you can reduce this size by reducing the amount of data that is logged. To do this fire up vCenter and set the statistics logging for \u0026lsquo;Day\u0026rsquo; to 3 or lower and retention for 1 day. Then give vCenter a day or two and check again, the table will have shrunk.\nIf the stats rollup job is already failing with \u0026lsquo;unable to lock row\u0026rsquo; or other errors you may need to correct the jobs that were installed with vCenter, follow these steps to complete that: VMware KB100905 If you are still having issues after completing those steps you can then truncate the tables and get back to a fresh hist_stat table. To complete this follow these steps: VMware KB1007453 (To avoid losing all the performance stats that have been gathered, just truncate the hist_stat1 table).\n  ","date":"Oct 20, 2010","img":"","permalink":"/posts/2010-10-20-20101020vcenter-database-optimization-thoughts-html/","series":null,"tags":null,"title":"vCenter Database Optimization Thoughts..."},{"categories":["vmware-vsphere"],"content":"Recently, we upgraded a customer from ESX 4.0 update 2 to ESX 4.1 – except they didn’t want to upgrade, they insisted on clean installs. Kickstart makes the deployment of new hosts easy, but they had around 40 of their hosts connected to 15 LUNs on an IBM XiV array. Best practice for the XiV suggests a “round robin” path selection policy, but it defaults to MRU (Most Recently Used) on install – so they all needed to be changed.\nThat’s a lot of clicking in the vSphere client…\nEnter vSphere PowerCLI!\nFirst, connect to your vCenter Server:\nConnect-VIServer \nNow, list all of the hosts and disks that are on the XiV array that are not set for RoundRobin:\nGet-VMHost |`\nGet-ScsiLun -LunType \u0026ldquo;disk\u0026rdquo; |`\nwhere {$_.MultipathPolicy –ne \u0026ldquo;RoundRobin\u0026rdquo; -and $_.model -like \u0026ldquo;*xiv*\u0026quot;}|`\nformat-table VMHost,CanonicalName,MultiPathPolicy –autosize\nThis one-liner (broken up for clarity):\n  connects to each host under management by the vCenter server\n  gets SCSI LUNs of type “disk” (as opposed to a controller or something else) that have a MultiPath Policy that is not Round Robin and also have a model name that includes “XIV” in the name.\n  dumps a table listing the ESX host, the name of the LUN, and the current policy to the screen\n  OK, so now let’s change them all – instead of dumping a table to the screen, let’s pipe the results to the command Set-ScsiLun -MultipathPolicy \u0026ldquo;RoundRobin\u0026rdquo; . The complete command is:\nGet-VMHost |`\nGet-ScsiLun -LunType \u0026ldquo;disk\u0026rdquo; |`\nwhere {$_.MultipathPolicy –ne \u0026ldquo;RoundRobin\u0026rdquo; -and $_.model -like \u0026ldquo;*xiv*\u0026quot;}|`\nSet-ScsiLun -MultipathPolicy \u0026ldquo;RoundRobin\u0026rdquo;\nOf course, like all things PowerShell, the –whatif parameter is supported, so if you want to verify that it will do what you expect before actually making the change, append it to the end of command above.\nThat’s it; all of the XiV LUNs are now set to Round Robin. Verify this by running the first command again – there should be no output.\n","date":"Sep 22, 2010","img":"","permalink":"/posts/2010-09-22-2010922modify-vsphere-path-selection-policy-in-bulk-html/","series":null,"tags":null,"title":"Modify vSphere Path Selection Policy in Bulk"},{"categories":["vmware-vsphere"],"content":"Recently after upgrading to vCenter for a few customers the following started to appear in their Windows Event logs:\nActive Directory Web Services encountered an error while reading the settings for the specified Active Directory Lightweight Directory Services instance. Active Directory Web Services will retry this operation periodically. In the meantime, this instance will be ignored. Instance name: ADAM_VMwareVCMSDS\nTo correct this you need to add the following to the registry:\n Key: HKLMSystemCurrentControlSetServicesVMwareVCMSDSParameters\nValue: Port SSL\nType: REG_DWORD\nData: 636\n Restart the ADAM instance and the errors should stop. (Unless of course you need something other than the default ports)\n","date":"Sep 21, 2010","img":"","permalink":"/posts/2010-09-21-2010921vcenter-41-adam_vmwarevcmsds-error-html/","series":null,"tags":null,"title":"vCenter 4.1 ADAM_VMwareVCMSDS Error"},{"categories":["vmware-vsphere"],"content":"Recently while upgrading a customers vCenter database to 4.1 from 4.0 I ran in to this gem of a problem. The problem is created when you change the schema of the account that accesses the database. So if you have a user that is in the dbo schema then you change that user to something like VPXAdmin for the schema the upgrade will break on you. When using the regular installer we received a message that the schema\u0026rsquo;s did not match.\nSo normally you should login to SQL and verify that the schema\u0026rsquo;s match or that it didn\u0026rsquo;t change on you. But if for some reason you sign in and don\u0026rsquo;t see anything wrong here is some more steps to lead you down a rabbit hole.\nTo complete a DB upgrade without using the full fledged installed you can run the VCDatabaseUpgrade utility from the installation media under the vpxdbupgradebin directory. The command to use is like this\n VCDatabaseUpgrade.exe DSN=UID=PWD= This will attempt to run the wizard as that user; if for some reason nothing happens you should check out the logs in this location (the username is the user that is attempting to launch the utility which may not be the same user that has DB rights):\nWindows 2008 and newer:\n C:UsersAppDataLocalTemp2\n Windows 2003:\n C:Documents and SettingsApplication DataLocalTemp2\n This log file will show something such as:\n [9/8/2010 4:10:39 PM] Initialize failed, exiting\u0026hellip;\n[9/8/2010 4:10:45 PM] Info: Beginning upgrade process\u0026hellip;.\n[9/8/2010 4:10:45 PM] Info: vCenterTest_SQLNativev10 has been detected as a SQL server.\n[9/8/2010 4:10:45 PM] Error: ERROR [28000] [Microsoft][SQL Server Native Client 10.0][SQL Server]Login failed for user \u0026lsquo;administrator\u0026rsquo;.\nERROR [28000] [Microsoft][SQL Server Native Client 10.0][SQL Server]Login failed for user \u0026lsquo;administrator\u0026rsquo;.\n If the wizard starts up click next and start. If all goes well then it will upgrade your database without any issue or error (but then again you wouldn\u0026rsquo;t be reading this if you didn\u0026rsquo;t have an error). The mismatched schema causes issues about 3/4 of the way through the first file with this line in the logs:\n create table vpx_device_tmp (DEVICE_ID NUMERIC(38) identity(0,1), DEVICE_NAME nvarchar(255))\nSET IDENTITY_INSERT dbo.vpx_device_tmp ON\n What quickly stuck out at me is that the script is creating a table vpx_device_tmp without specifying the schema to use, meaning that it uses the users default (which in my case had been changed). So instead of getting a table with dbo.vpx_device_tmp we get something like VPXAdmin.vpx_device_tmp; which then breaks on the very next command when SQL tries to locate and set the Identity on the table.\nSo how do we fix this little problem?\nFirst we need to roll back the database to pre-upgrade status (that is why you took a backup prior to starting this process! Sure we could continue from here but there is about 700 lines of SQL code that need to be backed out otherwise you will get errors when attempting to re-run it such as this error:\n ALTER TABLE VPX_HOST ADD BOOT_TIME_ON_HOST NUMERIC(21) null\n[9/8/2010 4:18:16 PM] Error: Failed to execute command: ALTER TABLE VPX_HOST ADD BOOT_TIME_ON_HOST NUMERIC(21) null\n[9/8/2010 4:18:16 PM] Got exception: ERROR [42S21] [Microsoft][SQL Server Native Client 10.0][SQL Server]Column names in each table must be unique. Column name \u0026lsquo;BOOT_TIME_ON_HOST\u0026rsquo; in table \u0026lsquo;VPX_HOST\u0026rsquo; is specified more than once.\n[9/8/2010 4:18:16 PM] Error while upgrading: ERROR [42S21] [Microsoft][SQL Server Native Client 10.0][SQL Server]Column names in each table must be unique. Column name \u0026lsquo;BOOT_TIME_ON_HOST\u0026rsquo; in table \u0026lsquo;VPX_HOST\u0026rsquo; is specified more than once.\n[9/8/2010 4:18:16 PM] Info: Exiting Upgrade Wizard\n[9/8/2010 4:20:59 PM] Info: Flushing all logs and quitting application.\n So after we roll back, we need to modify the default schema from the incorrect value to the dbo value that it was installed with. Once that is complete re-start the upgrade and watch as it completes without error (unless you are really unlucky).\nVMware probably should have caught this problem in QA but since it is a pretty bizarre test case I am sure they will add it next time, :). Or they could just make sure to use fully qualified tables in their upgrade scripts and not even have to worry about something like this.\n","date":"Sep 9, 2010","img":"","permalink":"/posts/2010-09-09-201099vcenter-41-upgrade-woes-html/","series":null,"tags":null,"title":"vCenter 4.1 Upgrade Woes"},{"categories":["vmware-vsphere"],"content":"I came back from a good lunch with HP talking about the G7 servers that should be released any month now to find:\nCongratulations! You have achieved the VMware Certified Design Expert on VI3 (VCDX3) certification.\nYour VCDX number is: VCDX51\nAfter I stopped jumping up and down cheering and causing quite a scare, I was able to really grasp what this means.\nI would like to thank everyone that has helped me along with this certification, from my manager to my former supervisor and of course previous employers that allowed me to experiment with VMware while saving them vast sums of money in hardware. And of course to my loving wife, who I am sure will be happy to get her husband back after nearly two weeks of laying awake at night waiting for this news.\nSo what does it mean to my current job and career?\nWell besides being the hardest to obtain and biggest achievement that I have ever received it helps to validate to myself that I do know what I am talking about. It also helps to validate that the server rack of hardware at home is actually being used and helping me to justify its cost (well to the wife anyway).\nOther than that, we will have to see what it means.\nFor now, thank you all. And CONGRATULATIONS to all my fellow VCDX\u0026rsquo;s!\n","date":"Sep 7, 2010","img":"","permalink":"/posts/2010-09-07-201097vcdx-51-html/","series":null,"tags":null,"title":"VCDX 51"},{"categories":["vmware-vsphere"],"content":"As they announced in early August, they are now licensing SRM (as of Sept 1st, 2010) as a per protected VM model. Meaning that you no longer have to license the entire cluster of VM\u0026rsquo;s for SRM, you can select individual VM\u0026rsquo;s to be protected by SRM. So with that and the introduction of DRS Affinity inside of vSphere 4.1.\nDRS Affinity allows you to select which hosts the VM is allowed to be on inside the cluster (think DRS rules but super-fied)\nNow just think of where else this can be applied\u0026hellip;\nvSphere ESX Licenses on a per VM model?\nMakes since right? Back when VMware started you could expect a 5 - 10 to 1 consolidation ratio, and now with Moore\u0026rsquo;s law doubling transistors every year we can easily get 250 - 400 to 1 consolidation ratio. So we are buying less vSphere per VM, which is not a sustainable model; so what option is left? A per-VM model license, so if VM \u0026lsquo;A\u0026rsquo; uses DRS, HA and vMotion it costs $50/yr (just a guess), but if VM \u0026lsquo;B\u0026rsquo; uses HA and no vMotion it could cost just $25/yr (again, wild guess).\nThink about what this can do for the market place and for those IT shops that struggle with charge back. We can now assign pricing to the levels of SLA\u0026rsquo;s that we give the end users! Oh wait\u0026hellip; VMware has a module to do that for us today http://www.vmware.com/products/vcenter-chargeback/ http://www.vmware.com/products/vcenter-chargeback/ Of course I really have no idea that this may be happening, in fact I am sitting in a brewery so I may be completely off my rocker, but just think about it for a while, :) .\n","date":"Sep 3, 2010","img":"","permalink":"/posts/2010-09-03-201093vmwares-new-license-structure-html/","series":null,"tags":null,"title":"VMware's New License Structure"},{"categories":["vmware-vsphere"],"content":"As you know VMworld 2010 is all over, they are ripping doing the signs in the Mascone Center. The hotels are emptying out of the geeks, nerds and technology enthusiasts, and promptly refilling with vacationing Labor Day weekend get-a-ways. So what was learned in this 4 day conference where VMware took center stage and did a dance in the spot light? Well\u0026hellip;\n  VMware View 4.5 was released\n  VMware ThinApp 4.6 was announced\n  VMware vCloud Director (the marketing team really likes that lower case v)\n  But more surprisingly is what was not released announced or even talked about\u0026hellip; Yet was in their booth with product experts?!? I am referring to Virtual Configuration Manager (VCM for short) or maybe you remember it as a part of the EMC IONIX product line called Server Configuration Manager (SCM) or maybe it was the original product Enterprise Configuration Manager (ECM) written by Configuresoft. But why wouldn\u0026rsquo;t VMware put this up on the center stage and parade it around? Possibly it isn\u0026rsquo;t ready for the spotlight.\nWell what ever the reason being here is why they should have put it up there:\n  vSphere 4.1 is the last release with the Shavlik VMware Update Manager release, so what is going to replace it? VCM of course\n  vSphere 4.0 beta was rumored to be testing a VM and Host level configuration manager tool, but when GA rolled around it was axed from the product and we were left with a cut down build called \u0026lsquo;Host Profiles\u0026rsquo;\n  vSphere 4.x has a gapping hole in the product line around reporting and historical trending\u0026hellip; Think data space trending\u0026hellip; (Sure Cap IQ can do that, but only after you install it (no historical information))\n  So whenever VMware gets around to announcing this huge acquisition that it got from EMC and what it plans to do with the technology mother load that it is sitting on, I will be there with ears tuned in. Until then what is the hang up? SCVMM (Microsoft\u0026rsquo;s System Center Virtual Machine Manager) is just trying to take that market that VMware appears to be letting slip away.\n","date":"Sep 3, 2010","img":"","permalink":"/posts/2010-09-03-201093vmworld-2010-is-over-so-html/","series":null,"tags":null,"title":"VMworld 2010 is over... So?"},{"categories":["vmware-vsphere"],"content":"In case you are ever stuck trying to get our iSCSI Initiator to link up to the target or just troubleshooting some vMotion problems you can do the following:\nFrom the console or terminal on a ESX host (CLI will work for ESXi as well) do teh following:\n vmkping  This will use the vmk port groups to test connectivity to the iSCSI or other vSphere servers. A good ping will result in a result like this:\n PING server(10.0.0.1): 56 data bytes\n64 bytes from 10.0.0.1: icmp_seq=0 ttl=64 time=10.245 ms\n64 bytes from 10.0.0.1: icmp_seq=1 ttl=64 time=0.935 ms\n64 bytes from 10.0.0.1: icmp_seq=2 ttl=64 time=0.926 ms\n A failure of the ping is like this:\n [root@server]# vmkping server\nPING server (10.0.0.2) 56(84) bytes of data.\n-\u0026ndash; server ping statistics \u0026mdash; 3 packets transmitted, 0 received, 100% packet loss, time 3017ms\n This method will help to resolve the unable to connect to destination errors that a vMotion can produce\n","date":"Aug 19, 2010","img":"","permalink":"/posts/2010-08-19-2010819how-to-test-vmkernel-connectivity-html/","series":null,"tags":null,"title":"How to test vmKernel connectivity"},{"categories":["vmware-vsphere"],"content":"From VMware:\n In vSphere 4.1:\nVMDirectPath and USB Device Passthrough with vMotion is supported\nMigration with vMotion and DRS for virtual machines configured with USB device passthrough from an ESX/ESXi host is supported\nFault Tolerant (FT) protected virtual machines can now vMotion via DRS. However, Storage vMotion is unsupported at this time.\nNote: Ensure that the ESX hosts are at the same version and build.\nIn addition to the above, vSphere 4.1 has improved vMotion performance and allows:\n4 concurrent VMotion operations per host on a 1GB network\n8 concurrent VMotion operations per host on a 10GB network\n8 concurrent VMotion operations per datastore\n Finally VMware is allowing us to take advantage of the larger 10GBit pipes and allowing more than 1 vMotion at a time.\n","date":"Aug 19, 2010","img":"","permalink":"/posts/2010-08-19-2010819vmotion-changes-in-vsphere-41-html/","series":null,"tags":null,"title":"vMotion Changes in vSphere 4.1"},{"categories":["vmware-vsphere"],"content":"When using more than 64 devices with the software iSCSI initiator the vmkernel logs will start to produce errors such as:\n Jul 19 08:01:01 esx vmkernel: 0:03:38:54.053 cpu2:1039)iSCSI: bus 0 target 46 cannot allocate new session (size %Zu) at 10464\nJul 19 08:01:01 esx vmkernel: 0:03:38:54.054 cpu4:1040)WARNING: Heap: 1419: Heap vmk-iscsi (6288144/6291456): Maximum allowed growth (3320) too small for size (20480)\n I most recently saw this problem crop up with a customer and a large XIV deployment to 32 vSphere hosts. To resolve this problem we can increase the heap size to 8MB (from the default of 6MB) via this command:\n esxcfg-module -s heap_max=8388608 iscsi_mod\n Why 8388608? Well this is the byte count (8 * 1024 * 1024 = 8388608). Once this modification is complete a complete reboot of the ESX host is required to set this change.\n","date":"Aug 19, 2010","img":"","permalink":"/posts/2010-08-19-2010819vsphere-4x-iscsi-heap-usage-html/","series":null,"tags":null,"title":"vSphere 4.x iSCSI Heap Usage"},{"categories":["vmware-vsphere"],"content":"About a week ago while testing vSphere 4.1 upgrades and deployment methods, I signed into a host\u0026rsquo;s service console as root, and I could have swore that I typed the password incorrectly. So I signed back out and tried it again, and it let me in with an extra digit at the end of the password. Some more testing led me to see that the PAM software was only checking the first 8 characters of the password and ignoring the rest of it.\nAfter some fancy Google\u0026rsquo;ing and wishing I found this article on the virtuallyGhetto blog: http://www.virtuallyghetto.com/2010/07/esxi-41-major-security-issue.html The good news is that VMware is aware of the issue and has a work around to correct the problem: http://kb.vmware.com/selfservice/microsites/search.do?language=en_US\u0026amp;cmd=displayKC\u0026amp;externalId=1024500 VMware\u0026rsquo;s Solution For ESX:\nAdd md5 to the file /etc/pam.d/system-auth.\n Log in to the service console and acquire root privileges. Change to the directory /etc/pam.d/. Use a text editor to open the file system-auth. Add md5 to the following line, as shown:  1password sufficient /lib/security/$ISA/pam_unix.so use_authtok nullok shadow md5 Optionally, you can use the following sed command to accomplish this:\n1sed -e /password.*pam_unix.so/s/$/ md5/ -i /etc/pam.d/system-auth For ESXi:\nAdd md5 to the file /etc/pam.d/system-auth.\n Access tech support mode. Change to the directory /etc/pam.d/. Use a text editor to open the file system-auth. Add md5 to the following line, as shown:  1password sufficient /lib/security/$ISA/pam\\_unix.so use\\_authtok nullok shadow md5 (Optional) If you want the change to persist when you restart ESXi, you must add the following line to the file /etc/rc.local:\n1sed -e \u0026#39;/password.*pam_unix.so.* md5/q\u0026#39; -e \u0026#39;/password.*pam_unix.so/s/$/ md5/\u0026#39; -i /etc/pam.d/system-auth VMware expects to release a permanent solution to this issue sometime in the future. We recommend that you remove the workaround from ESXi systems when you install the permanent solution.\n","date":"Jul 21, 2010","img":"","permalink":"/posts/2010-07-21-2010721vsphere-41-esxi-major-security-flaw-html/","series":null,"tags":null,"title":"vSphere 4.1 ESX(i) Major Security Flaw"},{"categories":["vmware-vsphere"],"content":"The best news a guy could get\u0026hellip;\nThomas,\nCongratulations! We have completed a preliminary technical review of your VCDX Application, and you have been accepted to advance to the next and final step: the VCDX Defense.\nThe VCDX Defense will be conducted at the VMware headquarters:\n3401 Hillview Ave\nPalo Alto, CA 94304\nXXX has been reserved for your defense. Please confirm that this date works for you, an a specific timeslot will be communicated to you at a later time.\nAgain, congratulations on your progress thus far in the VCDX Program.\nRegards,\nThe VMware Technical Certification Team\nAnd now the worry\u0026hellip;\n","date":"Jul 20, 2010","img":"","permalink":"/posts/2010-07-20-2010720vcdx-application-status-html/","series":null,"tags":null,"title":"VCDX Application Status"},{"categories":["vmware-vsphere"],"content":"Since the vCenter now requires a 64 bit operating system to install, the DSN must be upgraded as well to support the 64bit application. Currently vCenter 4.0 and older all required a 32 bit DSN. To change to the proper DSN you will need to remove the old one from the 32-bit DSN application and create a new DSN.\n  Remove the old DSN if it exists from: %windir%\\SysWoW64\\ODBCAD32.exe\n  Install the 64 bit SQL native client from: http://go.microsoft.com/fwlink/?LinkId=123718\u0026amp;clcid=0x409   Create a new DSN from the utility in Administrative Tools or here: %windir%\\system32\\ODBCAD32.exe (this is the 64 bit version)\n  Install vCenter and get rocking and rolling.\n  ","date":"Jul 13, 2010","img":"","permalink":"/posts/2010-07-13-2010713vcenter-installation-tips-html/","series":null,"tags":null,"title":"vCenter Installation Tips"}]